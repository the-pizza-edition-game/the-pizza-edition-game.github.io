import{_ as X,q as v,D as N,j as P,c as g,o as c,a as e,n as A,b as f,m as Z,t as r,d as $,x,z as Ce,T as ee,I as V,v as D,G as Se,J as Le,f as Ee,i as K,K as $e,u as H,L as Te,k as s,y as Fe,w as M,F as Y,r as Q,M as Re,N as xe,e as Ge,l as Pe,O as ze}from"./CVfAkKnE.js";import{_ as Be}from"./Iux7B2Rd.js";import{u as Me}from"./Ztdxw3gF.js";const Ne={class:"bookmark-reminder"},Ue={class:"bookmark-content"},Ae={class:"bookmark-left"},Oe={class:"bookmark-text"},Ie={class:"bookmark-right"},qe={class:"bookmark-shortcut"},He={class:"shortcut-key"},Ve={class:"modal-content"},De={class:"modal-header"},je={class:"modal-icon"},We={class:"modal-body"},Je={class:"key"},Ke={class:"modal-tip"},Ye={__name:"BookmarkReminder",props:{title:{type:String,default:"Bookmark This Page"},description:{type:String,default:"Save this page to easily find it again later!"},buttonText:{type:String,default:"Bookmark Now"},modalTitle:{type:String,default:"Bookmark This Page"},modalTip:{type:String,default:"ðŸ’¡ This way you can easily find this page again!"},bookmarkUrl:{type:String,default:null},bookmarkTitle:{type:String,default:null}},setup(h){const u=h,k=v(!1),E=v(!1);N(()=>{E.value=navigator.userAgent.toLowerCase().indexOf("mac")!==-1});const b=P(()=>E.value?"âŒ˜":"Ctrl"),w=P(()=>E.value?"Cmd":"Ctrl"),T=()=>{k.value=!1};function L(F,o){try{return window.sidebar&&window.sidebar.addPanel?(window.sidebar.addPanel(o,F,""),!0):window.external&&window.external.AddFavorite?(window.external.AddFavorite(F,o),!0):!1}catch{return!1}}const j=()=>{const F=u.bookmarkUrl??window.location.href,o=u.bookmarkTitle??document.title;L(F,o)||(k.value=!0)};return(F,o)=>{const R=Z;return c(),g("div",null,[e("div",Ne,[e("div",Ue,[e("div",Ae,[f(R,{name:"fa6-solid:bookmark",class:"bookmark-icon"}),e("div",Oe,[e("h3",null,r(h.title),1),e("p",null,r(h.description),1)])]),e("div",Ie,[e("div",qe,[e("kbd",He,r(b.value),1),o[0]||(o[0]=e("span",{class:"shortcut-plus"},"+",-1)),o[1]||(o[1]=e("kbd",{class:"shortcut-key"},"D",-1))]),e("button",{class:"bookmark-btn",onClick:j},[f(R,{name:"fa6-solid:star"}),$(" "+r(h.buttonText),1)])])])]),(c(),A(ee,{to:"body"},[k.value?(c(),g("div",{key:0,class:"modal-overlay",onClick:Ce(T,["self"])},[e("div",Ve,[e("div",De,[e("div",je,[f(R,{name:"fa6-solid:bookmark"})]),e("h3",null,r(h.modalTitle),1),e("button",{class:"modal-close",onClick:T,"aria-label":"Close"},[f(R,{name:"fa6-solid:times"})])]),e("div",We,[e("p",null,[o[2]||(o[2]=$(" Press ",-1)),e("kbd",Je,r(w.value),1),o[3]||(o[3]=$(" + ",-1)),o[4]||(o[4]=e("kbd",{class:"key"},"D",-1)),o[5]||(o[5]=$(" to bookmark this page ",-1))]),e("p",Ke,r(h.modalTip),1)]),e("div",{class:"modal-footer"},[e("button",{class:"modal-btn primary",onClick:T}," Got it! ")])])])):x("",!0)]))])}}},Qe=Object.assign(X(Ye,[["__scopeId","data-v-073df4f4"]]),{__name:"BookmarkReminder"});function Xe(h){const u=v(!1),k=v(!1),E=async()=>{if(!(!h.value?.url||k.value)){k.value=!0;try{const w=new AbortController,T=setTimeout(()=>w.abort(),5e3),L=await fetch(h.value.url,{method:"GET",signal:w.signal,cache:"no-store"});clearTimeout(T),L.ok?(u.value=!1,console.log("Game URL is accessible (20x):",h.value.url,L.status)):(u.value=!0,console.log("Game URL is NOT accessible (non-20x):",h.value.url,L.status))}catch(w){u.value=!0,console.log("Game URL is NOT accessible (error):",h.value.url,w.name)}finally{k.value=!1}}},b=()=>{document.visibilityState==="visible"&&E()};return N(()=>{E(),typeof document<"u"&&document.addEventListener("visibilitychange",b)}),V(()=>{typeof document<"u"&&document.removeEventListener("visibilitychange",b)}),D(u,w=>{console.log("Game URL accessible:",!w)}),{isOffline:u,isCheckingAccessibility:k,checkAccessibie:E}}const Ze={class:"game-page"},et={key:0,class:"game-layout"},tt={class:"main-column"},ot={class:"game-container-wrapper"},nt={key:0,class:"ruffle-container",style:{display:"flex","align-items":"center","justify-content":"center",color:"white"}},st=["src"],at={class:"game-bar"},lt={class:"game-bar-left"},it={class:"game-title"},rt={class:"game-rating"},ct={class:"stars"},ut={class:"rating-score"},dt={class:"rating-count"},mt={class:"game-bar-right"},ft={key:0,class:"share-popover"},pt={class:"game-content-grid"},gt={class:"game-description-card"},vt={class:"desc-header"},yt={class:"desc-content"},ht={key:0,class:"game-description"},kt={key:1,class:"game-description"},bt={key:2,class:"game-keybindings"},_t={class:"keybindings-content"},wt={class:"tech-info"},Ct={class:"tech-item"},St={class:"tech-value"},Lt={class:"tech-item"},Et={class:"tech-value"},$t={class:"tech-item"},Tt={class:"tech-value"},Ft={class:"game-tags"},Rt={class:"sidebar-column"},xt={class:"sidebar-content"},Gt={class:"games-grid"},Pt={key:1,class:"not-found"},zt={key:0,class:"toast-notification"},Bt=Se({__name:"[slug]",async setup(h){let u,k;const b=Le().params.slug,w=Ee(),T=w.public.siteUrl||"https://pizagame.com",L=w.public.siteTarget||"production",F=L==="github"?"github io":L==="bitbucket"?"bitbucket io":L==="gitlab"?"gitlab io":"",{data:o}=([u,k]=K(()=>Pe(`/api/games/${b}`,{key:`game-${b}`},"$h3TYe2aeyH")),u=await u,k(),u),{data:R}=([u,k]=K(()=>ze(`/api/games/similar/${b}`,{key:`similar-${b}`,default:()=>[]},"$m6kVydA0vn")),u=await u,k(),u),G=P(()=>o.value?.format==="flash");he(o),ye(o,b,T,F);const{containerRef:te,pseudoFullscreen:oe,toggleFullscreen:W}=ke(),{containerRef:ne,reload:se}=be(o,G),{rating:ae,votes:le,showShare:O,showToast:ie,toastMessage:re,copyLink:J}=_e(),{isGameCached:ce,getCacheStatus:ue,getCachedGameUrl:de}=Me(),I=v(!1);v(!1);const me=v("none"),{isOffline:fe}=Xe(o),pe=P(()=>!o.value||G.value?"":I.value?ge():fe.value?`/api/game-proxy?url=${encodeURIComponent(o.value.url)}`:o.value.url),q=v(""),ge=n=>q.value?q.value:"";N(async()=>{if(o.value&&b){const n=String(b);if(I.value=await ce(n),me.value=await ue(n),I.value){const t=await de(n);t&&(q.value=t)}}});const ve=()=>{if(G.value)se();else{const n=document.querySelector("iframe");n&&(n.src=n.src)}};function ye(n,t,l,a){$e(()=>{if(!n.value)return;const C=`${n.value.title||"Game"} - Pizza Edition, Play Unblocked Full Screen`,y=a?`${C} ${a}`:C,_=n.value.description,i=`${l}/games/${n.value.slug||t}`,p=n.value.image?`${l}${n.value.image}`:`${l}/media/og-image.webp`,d=n.value.keywords||"",m=a?`${d}, ${a}`:d;H({title:y,meta:[{property:"og:title",content:y},{name:"description",content:_},{property:"og:description",content:_},{property:"og:image",content:p},{property:"og:url",content:i},{property:"og:type",content:"website"},{name:"twitter:title",content:y},{name:"twitter:description",content:_},{name:"twitter:image",content:p},{name:"keywords",content:m}]}),H({link:[{rel:"canonical",href:i}],script:[{type:"application/ld+json",innerHTML:JSON.stringify({"@context":"https://schema.org","@type":"VideoGame",name:n.value.title||"Game",alternateName:`${n.value.title||"Game"} Pizza Edition`,description:_,url:i,image:p,playMode:n.value.categories?.includes("multiplayer")?"MultiPlayer":"SinglePlayer",applicationCategory:"Game",operatingSystem:"Web Browser",gamePlatform:n.value.platform||["Web Browser"],genre:n.value.categories||["Games"],offers:{"@type":"Offer",price:"0",priceCurrency:"USD",availability:"https://schema.org/InStock"},aggregateRating:{"@type":"AggregateRating",ratingValue:(n.value?.rating||9).toString(),ratingCount:(n.value?.votes||1e4).toString(),bestRating:"10",worstRating:"1"},publisher:{"@type":"Organization",name:"PizaGame",alternateName:["Pizza Edition","The Pizza Edition"],url:l}})},{type:"application/ld+json",innerHTML:JSON.stringify({"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"PizaGame",item:l},{"@type":"ListItem",position:2,name:"Games",item:`${l}/games`},{"@type":"ListItem",position:3,name:n.value.title||"Game",item:i}]})}]})})}function he(n){if(n.value?.url)try{const t=new URL(n.value.url).origin;H({link:[{rel:"preconnect",href:t,crossorigin:"anonymous"},{rel:"dns-prefetch",href:t}]})}catch{}}function ke(){const n=v(null),t=v(!1),l="pseudo-fullscreen-lock",a=typeof navigator<"u"&&/iP(ad|hone|od)/i.test(navigator.userAgent||""),C=typeof Element<"u"&&!!(Element.prototype.requestFullscreen||Element.prototype.webkitRequestFullscreen||Element.prototype.mozRequestFullScreen||Element.prototype.msRequestFullscreen),y=()=>document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement,_=S=>{if(!S)return;const U=S.requestFullscreen||S.webkitRequestFullscreen||S.mozRequestFullScreen||S.msRequestFullscreen;U&&U.call(S)?.catch(we=>{console.error(`Error attempting to enable fullscreen: ${we.message}`)})},i=()=>{const S=document.exitFullscreen||document.webkitExitFullscreen||document.mozCancelFullScreen||document.msExitFullscreen;S&&S.call(document)?.catch(U=>{console.error(`Error attempting to exit fullscreen: ${U.message}`)})},p=()=>document.body.classList.add(l),d=()=>document.body.classList.remove(l),m=()=>{y()||(t.value=!1,d())},z=()=>{document.visibilityState==="visible"&&!t.value&&!y()&&d()},B=()=>{!t.value&&!y()&&d()};return D(t,S=>{typeof document>"u"||(S?p():d())}),N(()=>{typeof document>"u"||(d(),document.addEventListener("fullscreenchange",m),document.addEventListener("webkitfullscreenchange",m),window.addEventListener("pageshow",B),document.addEventListener("visibilitychange",z))}),V(()=>{d(),typeof document<"u"&&(document.removeEventListener("fullscreenchange",m),document.removeEventListener("webkitfullscreenchange",m),window.removeEventListener("pageshow",B),document.removeEventListener("visibilitychange",z))}),{containerRef:n,pseudoFullscreen:t,toggleFullscreen:()=>{if(n.value){if(y()){i();return}if(t.value){t.value=!1,d();return}C&&!a?_(n.value):t.value=!0}}}}function be(n,t){const l=v(null),a=v(!1),C=()=>new Promise((p,d)=>{if(typeof window.RufflePlayer<"u"||typeof window.Ruffle<"u"){p();return}const m=document.createElement("script");m.src="https://unpkg.com/@ruffle-rs/ruffle",m.async=!0,m.onload=()=>{let z=0;const B=()=>{typeof window.RufflePlayer<"u"||typeof window.Ruffle<"u"?p():z<50?(z++,setTimeout(B,100)):d(new Error("Ruffle failed to initialize"))};B()},m.onerror=()=>d(new Error("Failed to load Ruffle script")),document.body.appendChild(m)}),y=()=>typeof window.RufflePlayer<"u"?window.RufflePlayer.newest():typeof window.Ruffle<"u"?window.Ruffle.newest():null,_=async()=>{if(!(!t.value||!l.value||a.value||!n.value||typeof window>"u"))try{await C();const p=y();if(!p)throw new Error("Ruffle failed to initialize");const d=p.createPlayer();d.config={autoplay:"auto",unmuteOverlay:"visible",backgroundColor:"#000000",letterbox:"on",logLevel:"warn",upgradeToHttps:!0,allowScriptAccess:!1,allowNetworking:"all",quality:"high",scale:"showAll",allowFullscreen:!0},l.value.appendChild(d);let m=n.value.url;m.startsWith("http://")&&window.location.protocol==="https:"&&(m=m.replace("http://","https://")),await d.load(m),a.value=!0}catch(p){console.error("Error loading Flash game:",p),l.value&&(l.value.innerHTML=`
          <div style="display: flex; align-items: center; justify-content: center; height: 100%; color: white; flex-direction: column; gap: 1rem;">
            <p>Error loading Flash game</p>
            <p style="font-size: 0.9rem; color: #999;">${p instanceof Error?p.message:"Unknown error"}</p>
          </div>
        `)}},i=()=>{l.value&&(l.value.innerHTML="",a.value=!1,_())};return D(()=>n.value?.slug,()=>{t.value&&i()}),N(()=>{t.value&&Te(()=>_())}),V(()=>{l.value&&(l.value.innerHTML="",a.value=!1)}),{containerRef:l,isLoaded:a,reload:i}}function _e(){const n=P(()=>o.value?.rating||9),t=P(()=>(o.value?.votes||0).toLocaleString()),l=v(!1),a=v(!1),C=v("");return{rating:n,votes:t,showShare:l,showToast:a,toastMessage:C,copyLink:()=>{navigator.clipboard.writeText(window.location.href),l.value=!1,C.value="Link copied to clipboard!",a.value=!0,setTimeout(()=>{a.value=!1},3e3)}}}return(n,t)=>{const l=xe,a=Z,C=Qe,y=Ge,_=Be;return c(),g("div",Ze,[s(o)?(c(),g("div",et,[e("div",tt,[e("div",ot,[e("div",{ref_key:"gamePlayerContainer",ref:te,class:Fe(["game-player",{"pseudo-fullscreen":s(oe)}])},[f(l,null,{fallback:M(()=>[s(G)?(c(),g("div",nt,[...t[3]||(t[3]=[e("p",null,"Loading Flash player...",-1)])])):x("",!0)]),default:M(()=>[s(G)?(c(),g("div",{key:0,ref_key:"ruffleContainer",ref:ne,class:"ruffle-container"},null,512)):x("",!0)]),_:1}),s(G)?x("",!0):(c(),g("iframe",{key:0,src:s(pe),title:"game",loading:"lazy",allowfullscreen:"",scrolling:"no",allow:`
                autoplay;
                fullscreen;
                geolocation;
                microphone;
                camera;
                midi;
              `},null,8,st))],2),e("div",at,[e("div",lt,[e("h1",it,r(s(o).title),1),e("div",rt,[e("div",ct,[f(a,{name:"fa6-solid:star"}),f(a,{name:"fa6-solid:star"}),f(a,{name:"fa6-solid:star"}),f(a,{name:"fa6-solid:star"}),f(a,{name:"fa6-solid:star-half-alt"})]),e("span",ut,r(s(ae)),1),e("span",dt,"("+r(s(le))+" votes)",1)])]),e("div",mt,[e("button",{onClick:ve,class:"tool-btn",title:"Reload"},[f(a,{name:"fa6-solid:rotate-right"})]),e("button",{class:"tool-btn",title:"Share",onClick:t[1]||(t[1]=i=>O.value=!s(O))},[f(a,{name:"fa6-solid:share-nodes"}),s(O)?(c(),g("div",ft,[e("button",{onClick:t[0]||(t[0]=(...i)=>s(J)&&s(J)(...i))},"Copy Link")])):x("",!0)]),e("button",{class:"tool-btn highlight",title:"Fullscreen",onClick:t[2]||(t[2]=(...i)=>s(W)&&s(W)(...i))},[f(a,{name:"fa6-solid:expand"})])])])]),f(C,{class:"bookmark-reminder-container",title:`Bookmark ${s(o)?.title}`,description:`Save ${s(o)?.title} to easily play it again later!`,"modal-title":"Bookmark This Game","modal-tip":`ðŸ’¡ This way you can easily find ${s(o)?.title} again!`},null,8,["title","description","modal-tip"]),e("div",pt,[e("div",gt,[e("div",vt,[e("h2",null,"About "+r(s(o).title),1)]),e("div",yt,[s(o).content?(c(),g("div",ht,[e("p",null,r(s(o).content),1)])):(c(),g("div",kt,[e("p",null,[t[4]||(t[4]=$(" Play ",-1)),e("strong",null,r(s(o).title),1),$(" online for free on Pizza Edition. It is a popular "+r(s(o).categories?.[0])+" game that you can play on your browser. ",1)])])),t[9]||(t[9]=e("h3",null,"Features",-1)),t[10]||(t[10]=e("ul",{class:"features-list"},[e("li",null,"Smooth and responsive gameplay"),e("li",null,"Play directly in your browser"),e("li",null,"No installation required"),e("li",null,"Mobile and desktop compatible")],-1)),s(o).keybindings?(c(),g("div",bt,[t[5]||(t[5]=e("h3",null,"Keybindings",-1)),e("div",_t,[e("p",null,r(s(o).keybindings),1)])])):x("",!0),e("div",wt,[e("div",Ct,[t[6]||(t[6]=e("span",{class:"tech-label"},"Developer",-1)),e("span",St,r(s(o).developer||"Pizza Edition"),1)]),e("div",Lt,[t[7]||(t[7]=e("span",{class:"tech-label"},"Platform",-1)),e("span",Et,r(Array.isArray(s(o).platform)?s(o).platform.join(", "):s(o).platform||"Web Browser"),1)]),e("div",$t,[t[8]||(t[8]=e("span",{class:"tech-label"},"Last Updated",-1)),e("span",Tt,r(s(o).lastUpdated||"October 2024"),1)])])]),e("div",Ft,[(c(!0),g(Y,null,Q(s(o).categories,i=>(c(),A(y,{key:i,to:`/category/${i}`,class:"tag-chip"},{default:M(()=>[$(r(i),1)]),_:2},1032,["to"]))),128))])])])]),e("aside",Rt,[e("div",xt,[t[11]||(t[11]=e("h3",{class:"sidebar-header"},"Recommended Games",-1)),e("div",Gt,[(c(!0),g(Y,null,Q(s(R),i=>(c(),A(_,{key:i.slug,game:i,"aspect-ratio":"1"},null,8,["game"]))),128))])])])])):(c(),g("div",Pt,[t[13]||(t[13]=e("h2",null,"Game not found",-1)),f(y,{to:"/",class:"btn-primary"},{default:M(()=>[...t[12]||(t[12]=[$("Go Home",-1)])]),_:1})])),(c(),A(ee,{to:"body"},[f(Re,{name:"toast",appear:""},{default:M(()=>[s(ie)?(c(),g("div",zt,[f(a,{name:"fa6-solid:check-circle"}),e("span",null,r(s(re)),1)])):x("",!0)]),_:1})]))])}}}),Ot=X(Bt,[["__scopeId","data-v-6258a3ad"]]);export{Ot as default};
