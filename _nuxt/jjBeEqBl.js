import{_ as Z,q as g,D as j,k as B,c as a,o,a as e,n as N,b as v,h as oe,t as d,d as T,x as _,z as ve,T as ye,G as ae,H as ce,y as V,l,A as ue,B as Ge,I as ke,w as H,J as be,F as ne,r as se,K as de,v as me,L as Me,f as ze,j as ge,M as Be,u as re,N as Ae,O as Oe,e as Ue,m as pe}from"./CqGba5J3.js";import{_ as De}from"./D2eRM8s8.js";import{u as Ne}from"./CM4bWbWV.js";const qe={class:"bookmark-reminder"},He={class:"bookmark-content"},je={class:"bookmark-left"},Ve={class:"bookmark-text"},We={class:"bookmark-right"},Je={class:"bookmark-shortcut"},Ke={class:"shortcut-key"},Ye={class:"modal-content"},Qe={class:"modal-header"},Xe={class:"modal-icon"},Ze={class:"modal-body"},et={class:"key"},tt={class:"modal-tip"},nt={__name:"BookmarkReminder",props:{title:{type:String,default:"Bookmark This Page"},description:{type:String,default:"Save this page to easily find it again later!"},buttonText:{type:String,default:"Bookmark Now"},modalTitle:{type:String,default:"Bookmark This Page"},modalTip:{type:String,default:"ðŸ’¡ This way you can easily find this page again!"},bookmarkUrl:{type:String,default:null},bookmarkTitle:{type:String,default:null}},setup(n){const k=n,i=g(!1),C=g(!1);j(()=>{C.value=navigator.userAgent.toLowerCase().indexOf("mac")!==-1});const c=B(()=>C.value?"âŒ˜":"Ctrl"),p=B(()=>C.value?"Cmd":"Ctrl"),w=()=>{i.value=!1};function u(b,t){try{return window.sidebar&&window.sidebar.addPanel?(window.sidebar.addPanel(t,b,""),!0):window.external&&window.external.AddFavorite?(window.external.AddFavorite(b,t),!0):!1}catch{return!1}}const $=()=>{const b=k.bookmarkUrl??window.location.href,t=k.bookmarkTitle??document.title;u(b,t)||(i.value=!0)};return(b,t)=>{const I=oe;return o(),a("div",null,[e("div",qe,[e("div",He,[e("div",je,[v(I,{name:"fa6-solid:bookmark",class:"bookmark-icon"}),e("div",Ve,[e("h3",null,d(n.title),1),e("p",null,d(n.description),1)])]),e("div",We,[e("div",Je,[e("kbd",Ke,d(c.value),1),t[0]||(t[0]=e("span",{class:"shortcut-plus"},"+",-1)),t[1]||(t[1]=e("kbd",{class:"shortcut-key"},"D",-1))]),e("button",{class:"bookmark-btn",onClick:$},[v(I,{name:"fa6-solid:star"}),T(" "+d(n.buttonText),1)])])])]),(o(),N(ye,{to:"body"},[i.value?(o(),a("div",{key:0,class:"modal-overlay",onClick:ve(w,["self"])},[e("div",Ye,[e("div",Qe,[e("div",Xe,[v(I,{name:"fa6-solid:bookmark"})]),e("h3",null,d(n.modalTitle),1),e("button",{class:"modal-close",onClick:w,"aria-label":"Close"},[v(I,{name:"fa6-solid:times"})])]),e("div",Ze,[e("p",null,[t[2]||(t[2]=T(" Press ",-1)),e("kbd",et,d(p.value),1),t[3]||(t[3]=T(" + ",-1)),t[4]||(t[4]=e("kbd",{class:"key"},"D",-1)),t[5]||(t[5]=T(" to bookmark this page ",-1))]),e("p",tt,d(n.modalTip),1)]),e("div",{class:"modal-footer"},[e("button",{class:"modal-btn primary",onClick:w}," Got it! ")])])])):_("",!0)]))])}}},st=Object.assign(Z(nt,[["__scopeId","data-v-073df4f4"]]),{__name:"BookmarkReminder"}),ot={key:0,class:"login-prompt"},at={key:0,class:"user-avatar-container"},lt=["src"],it={class:"input-area"},rt=["placeholder","disabled"],ct={class:"form-footer"},ut={class:"footer-left"},dt={key:0,class:"error-msg"},mt={class:"form-actions"},ft=["disabled"],vt=["disabled"],gt=ae({__name:"Form",props:{gameId:{},parentId:{},initialContent:{},isEdit:{type:Boolean},onSuccess:{type:Function},onCancel:{type:Function}},emits:["success","cancel"],setup(n,{emit:k}){const i=n,C=k,c=g(i.initialContent||""),p=g(!1),w=g(!1),u=g(""),$=g(null),b=ce.useSession(),t=B(()=>b.value?.data?.user),I=B(()=>c.value.trim().length>0&&c.value.length<=1e3),A=()=>{const x=$.value;x&&(x.style.height="auto",x.style.height=`${x.scrollHeight}px`)},W=()=>{A()},J=()=>{w.value=!0},U=async()=>{if(!(!I.value||p.value)){p.value=!0,u.value="";try{const x=i.isEdit?`/api/comments/${i.parentId}`:"/api/comments",S=i.isEdit?"PUT":"POST",m=i.isEdit?{content:c.value}:{gameId:i.gameId,content:c.value,parentId:i.parentId},L=await $fetch(x,{method:S,body:m});c.value="",w.value=!1,$.value&&($.value.style.height="auto"),C("success",L),i.onSuccess&&i.onSuccess()}catch(x){console.error("Failed to submit comment:",x),u.value=x.data?.statusMessage||"Failed to submit comment. Please try again."}finally{p.value=!1}}},K=()=>{i.isEdit?(C("cancel"),i.onCancel&&i.onCancel()):(c.value="",w.value=!1,u.value="",$.value&&($.value.style.height="auto"),i.parentId&&(C("cancel"),i.onCancel&&i.onCancel()))};return(x,S)=>(o(),a("div",{class:V(["comment-form-wrapper",{"is-edit":n.isEdit}])},[l(b)?.data?(o(),a("form",{key:1,onSubmit:ve(U,["prevent"]),class:"comment-form"},[n.isEdit?_("",!0):(o(),a("div",at,[e("img",{src:t.value?.image||"/media/default-avatar.webp",alt:"My Avatar",class:"user-avatar",loading:"lazy"},null,8,lt)])),e("div",it,[e("div",{class:V(["textarea-wrapper",{"is-focused":w.value||c.value.length>0}])},[S[3]||(S[3]=e("label",{for:"comment-content",class:"visually-hidden"},"Write a comment",-1)),ue(e("textarea",{id:"comment-content",ref_key:"textareaRef",ref:$,"onUpdate:modelValue":S[1]||(S[1]=m=>c.value=m),placeholder:n.isEdit?"Update your comment...":"Add a comment...",class:"comment-input",disabled:p.value,rows:"1",onFocus:J,onInput:W},null,40,rt),[[Ge,c.value]])],2),v(ke,{name:"fade-slide"},{default:H(()=>[ue(e("div",ct,[e("div",ut,[e("span",{class:V(["char-count",{"is-limit":c.value.length>1e3}])},d(c.value.length)+"/1000 ",3),u.value?(o(),a("span",dt,d(u.value),1)):_("",!0)]),e("div",mt,[e("button",{type:"button",onClick:K,class:"btn-cancel",disabled:p.value}," Cancel ",8,ft),e("button",{type:"submit",class:"btn-submit",disabled:!I.value||p.value},d(p.value?"Posting...":n.isEdit?"Save":"Comment"),9,vt)])],512),[[be,w.value||c.value.length>0||n.isEdit]])]),_:1})])],32)):(o(),a("div",ot,[e("p",null,[e("button",{class:"login-link",onClick:S[0]||(S[0]=m=>l(ce).signIn.social({provider:"google"}))}," Sign in "),S[2]||(S[2]=T(" to join the discussion ",-1))])]))],2))}}),fe=Object.assign(Z(gt,[["__scopeId","data-v-12b7b4cb"]]),{__name:"CommentForm"}),pt={class:"main-flex-row"},ht={key:0,class:"connector-curve"},yt={key:1,class:"thread-line-mask"},kt={class:"avatar-wrapper"},bt=["src","alt"],_t={key:1,class:"collapsed-indicator"},wt={class:"right-content"},$t=["datetime"],Ct={key:0,class:"edited-tag",title:"Edited"},St={key:1,class:"collapsed-state-info"},Et={class:"content-body-wrapper"},Ft={key:0,class:"comment-body"},xt={key:1,class:"item-form-container"},Rt={key:2,class:"action-bar"},Lt={key:1,class:"action-item disabled",title:"Max depth reached"},Tt={key:2,class:"owner-actions"},It=["disabled"],Pt={key:3,class:"item-form-container"},Gt={key:4,class:"replies-wrapper"},he=10,Mt=ae({__name:"Item",props:{comment:{},depth:{},gameId:{},isLast:{type:Boolean}},emits:["refresh"],setup(n,{emit:k}){const i=n,C=k,c=ce.useSession(),p=B(()=>c.value?.data?.user),w=g(!1),u=g(!1),$=g(!1),b=g(!1),t=B(()=>p.value?.id===i.comment.userId),I=S=>{const m=new Date(S),L=new Date,Y=L.getTime()-m.getTime(),O=Math.floor(Y/1e3),D=Math.floor(O/60),q=Math.floor(D/60),ee=Math.floor(q/24);return O<60?"just now":D<60?`${D}m`:q<24?`${q}h`:ee<7?`${ee}d`:m.toLocaleDateString(void 0,{month:"short",day:"numeric",year:L.getFullYear()!==m.getFullYear()?"numeric":void 0})},A=S=>new Date(S).toISOString(),W=()=>{w.value=!w.value,u.value=!1},J=()=>{u.value=!u.value,w.value=!1},U=()=>{b.value=!b.value},K=async()=>{if(confirm("Are you sure you want to delete this comment?")){$.value=!0;try{await $fetch(`/api/comments/${i.comment.id}`,{method:"DELETE"}),C("refresh")}catch(S){console.error("Failed to delete comment:",S),alert("Failed to delete comment")}finally{$.value=!1}}},x=()=>{w.value=!1,u.value=!1,C("refresh")};return(S,m)=>{const L=oe,Y=_e;return o(),a("article",{class:V(["comment-node",{"is-collapsed":b.value,"has-replies":n.comment.replies&&n.comment.replies.length>0}]),itemprop:"comment",itemscope:"",itemtype:"http://schema.org/Comment"},[e("div",pt,[e("div",{class:"left-rail",onClick:U},[n.depth>0?(o(),a("div",ht)):_("",!0),n.isLast&&n.depth>0?(o(),a("div",yt)):_("",!0),e("div",kt,[b.value?(o(),a("div",_t,[v(L,{name:"fa6-solid:plus",class:"collapse-icon"})])):(o(),a("img",{key:0,src:n.comment.user?.image||"/media/default-avatar.webp",alt:`${n.comment.user?.name||"User"}'s Avatar`,class:"user-avatar",loading:"lazy"},null,8,bt))]),!b.value&&n.comment.replies?.length?(o(),a("div",{key:2,class:"thread-line-container",onClick:ve(U,["stop"])},[...m[3]||(m[3]=[e("div",{class:"thread-line"},null,-1)])])):_("",!0)]),e("div",wt,[e("header",{class:"comment-header",onClick:U},[e("span",{class:V(["author-name",{"is-owner":t.value}])},d(n.comment.user?.name||"Anonymous"),3),m[4]||(m[4]=e("span",{class:"meta-separator"},"â€¢",-1)),e("time",{datetime:A(n.comment.createdAt),class:"time-ago"},d(I(n.comment.createdAt)),9,$t),n.comment.createdAt!==n.comment.updatedAt?(o(),a("span",Ct,"*")):_("",!0),b.value?(o(),a("span",St," ("+d(n.comment.replies?.length?`${n.comment.replies.length} children`:"hidden")+") ",1)):_("",!0)]),ue(e("div",Et,[u.value?_("",!0):(o(),a("div",Ft,d(n.comment.content),1)),u.value?(o(),a("div",xt,[v(fe,{"is-edit":!0,"parent-id":n.comment.id,"initial-content":n.comment.content,onSuccess:x,onCancel:m[0]||(m[0]=O=>u.value=!1)},null,8,["parent-id","initial-content"])])):_("",!0),u.value?_("",!0):(o(),a("div",Rt,[n.depth<he&&l(c)?.data?(o(),a("button",{key:0,class:"action-item",onClick:W,"aria-label":"Reply"},[v(L,{name:"fa6-regular:message",class:"action-icon"}),m[5]||(m[5]=T(" Reply ",-1))])):n.depth>=he?(o(),a("button",Lt," Max Depth ")):_("",!0),t.value?(o(),a("div",Tt,[e("button",{onClick:J,class:"action-item","aria-label":"Edit"},[v(L,{name:"fa6-regular:pen-to-square",class:"action-icon"}),m[6]||(m[6]=T(" Edit ",-1))]),e("button",{onClick:K,class:"action-item is-delete",disabled:$.value,"aria-label":"Delete"},[v(L,{name:"fa6-regular:trash-can",class:"action-icon"}),m[7]||(m[7]=T(" Delete ",-1))],8,It)])):_("",!0)])),w.value?(o(),a("div",Pt,[v(fe,{"game-id":n.gameId,"parent-id":n.comment.id,onSuccess:x,onCancel:m[1]||(m[1]=O=>w.value=!1)},null,8,["game-id","parent-id"])])):_("",!0),n.comment.replies&&n.comment.replies.length>0?(o(),a("div",Gt,[(o(!0),a(ne,null,se(n.comment.replies,(O,D)=>(o(),N(Y,{key:O.id,comment:O,depth:n.depth+1,"game-id":n.gameId,"is-last":D===n.comment.replies.length-1,onRefresh:m[2]||(m[2]=q=>C("refresh"))},null,8,["comment","depth","game-id","is-last"]))),128))])):_("",!0)],512),[[be,!b.value]])])])],2)}}}),_e=Object.assign(Z(Mt,[["__scopeId","data-v-de84b2cf"]]),{__name:"CommentItem"}),zt={id:"comments",class:"comment-section-card","aria-label":"User Comments"},Bt={class:"section-header"},At={key:0,class:"comment-count"},Ot={class:"main-form-container"},Ut={key:0,class:"loading-state"},Dt={key:1,class:"error-state"},Nt={key:2,class:"empty-state"},qt={key:3,class:"comments-list"},Ht=ae({__name:"Section",props:{gameId:{}},setup(n){const k=n,i=g([]),C=g(!0),c=g(""),p=async()=>{C.value=!0,c.value="";try{const u=await $fetch(`/api/comments?gameId=${k.gameId}`);i.value=u}catch(u){console.error("Failed to fetch comments:",u),c.value="Failed to load comments."}finally{C.value=!1}},w=B(()=>{const u=$=>$.reduce((b,t)=>b+1+(t.replies?u(t.replies):0),0);return u(i.value)});return j(()=>{p()}),(u,$)=>{const b=oe;return o(),a("section",zt,[e("div",Bt,[e("h3",null,[$[0]||($[0]=T(" Comments ",-1)),C.value?_("",!0):(o(),a("span",At,d(w.value),1))])]),e("div",Ot,[v(fe,{"game-id":n.gameId,onSuccess:p},null,8,["game-id"])]),C.value&&i.value.length===0?(o(),a("div",Ut,[v(b,{name:"fa6-solid:spinner",class:"spin"}),$[1]||($[1]=e("span",{class:"sr-only"},"Loading comments...",-1))])):c.value?(o(),a("div",Dt,[e("p",null,d(c.value),1),e("button",{onClick:p,class:"btn-retry"},"Retry")])):i.value.length===0?(o(),a("div",Nt,[v(b,{name:"fa6-regular:comments",class:"empty-icon"}),$[2]||($[2]=e("p",null,"No comments yet. Be the first to share your thoughts!",-1))])):(o(),a("div",qt,[(o(!0),a(ne,null,se(i.value,t=>(o(),N(_e,{key:t.id,comment:t,depth:0,"game-id":n.gameId,onRefresh:p},null,8,["comment","game-id"]))),128))]))])}}}),jt=Object.assign(Z(Ht,[["__scopeId","data-v-0b2725de"]]),{__name:"CommentSection"});function Vt(n){const k=g(!1),i=g(!1),C=async()=>{if(!(!n.value?.url||i.value)){i.value=!0;try{const p=new AbortController,w=setTimeout(()=>p.abort(),5e3),u=await fetch(n.value.url,{method:"GET",signal:p.signal,cache:"no-store"});clearTimeout(w),u.ok?(k.value=!1,console.log("Game URL is accessible (20x):",n.value.url,u.status)):(k.value=!0,console.log("Game URL is NOT accessible (non-20x):",n.value.url,u.status))}catch(p){k.value=!0,console.log("Game URL is NOT accessible (error):",n.value.url,p.name)}finally{i.value=!1}}},c=()=>{document.visibilityState==="visible"&&C()};return j(()=>{C(),typeof document<"u"&&document.addEventListener("visibilitychange",c)}),de(()=>{typeof document<"u"&&document.removeEventListener("visibilitychange",c)}),me(k,p=>{console.log("Game URL accessible:",!p)}),{isOffline:k,isCheckingAccessibility:i,checkAccessibie:C}}const Wt={class:"game-page"},Jt={key:0,class:"game-layout"},Kt={class:"main-column"},Yt={class:"game-container-wrapper"},Qt={key:0,class:"ruffle-container",style:{display:"flex","align-items":"center","justify-content":"center",color:"white"}},Xt=["src"],Zt={class:"game-bar"},en={class:"game-bar-left"},tn={class:"game-title"},nn={class:"game-rating"},sn={class:"stars"},on={class:"rating-score"},an={class:"rating-count"},ln={class:"game-bar-right"},rn={key:0,class:"share-popover"},cn={class:"game-content-grid"},un={class:"game-description-card"},dn={class:"desc-header"},mn={class:"desc-content"},fn={key:0,class:"game-description"},vn={key:1,class:"game-description"},gn={key:2,class:"game-keybindings"},pn={class:"keybindings-content"},hn={class:"tech-info"},yn={class:"tech-item"},kn={class:"tech-value"},bn={class:"tech-item"},_n={class:"tech-value"},wn={class:"tech-item"},$n={class:"tech-value"},Cn={class:"game-tags"},Sn={class:"sidebar-column"},En={class:"sidebar-content"},Fn={class:"games-grid"},xn={key:1,class:"not-found"},Rn={key:0,class:"toast-notification"},Ln=ae({__name:"[slug]",async setup(n){let k,i;const c=Me().params.slug,p=ze(),w=p.public.siteUrl||"https://pizagame.com",u=p.public.siteTarget||"production",b=u==="github"?"github io":u==="bitbucket"?"bitbucket io":u==="gitlab"?"gitlab io":"",{data:t}=([k,i]=ge(()=>pe(`/api/games/${c}`,{key:`game-${c}`},"$h3TYe2aeyH")),k=await k,i(),k),{data:I}=([k,i]=ge(()=>pe(`/api/games/similar/${c}`,{key:`similar-${c}`,default:()=>[]},"$m6kVydA0vn")),k=await k,i(),k),A=B(()=>t.value?.format==="flash");Re(t),xe(t,c,w,b);const{containerRef:W,pseudoFullscreen:J,toggleFullscreen:U}=Le(),{containerRef:K,reload:x}=Te(t,A),{rating:S,votes:m,showShare:L,showToast:Y,toastMessage:O,copyLink:D}=Ie(),{isGameCached:q,getCacheStatus:ee,getCachedGameUrl:we}=Ne(),le=g(!1);g(!1);const $e=g("none"),{isOffline:Ce}=Vt(t),Se=B(()=>!t.value||A.value?"":le.value?Ee():Ce.value?`/api/game-proxy?url=${encodeURIComponent(t.value.url)}`:t.value.url),ie=g(""),Ee=r=>ie.value?ie.value:"";j(async()=>{if(t.value&&c){const r=String(c);if(le.value=await q(r),$e.value=await ee(r),le.value){const s=await we(r);s&&(ie.value=s)}}});const Fe=()=>{if(A.value)x();else{const r=document.querySelector("iframe");r&&(r.src=r.src)}};function xe(r,s,y,h){Be(()=>{if(!r.value)return;const G=`${r.value.title||"Game"} - Pizza Edition, Play Unblocked Full Screen`,R=h?`${G} ${h}`:G,P=r.value.description,M=`${y}/games/${r.value.slug||s}`,f=r.value.image?`${y}${r.value.image}`:`${y}/media/og-image.webp`,E=r.value.keywords||"",F=h?`${E}, ${h}`:E;re({title:R,meta:[{property:"og:title",content:R},{name:"description",content:P},{property:"og:description",content:P},{property:"og:image",content:f},{property:"og:url",content:M},{property:"og:type",content:"website"},{name:"twitter:title",content:R},{name:"twitter:description",content:P},{name:"twitter:image",content:f},{name:"keywords",content:F}]}),re({link:[{rel:"canonical",href:M}],script:[{type:"application/ld+json",innerHTML:JSON.stringify({"@context":"https://schema.org","@type":"VideoGame",name:r.value.title||"Game",alternateName:`${r.value.title||"Game"} Pizza Edition`,description:P,url:M,image:f,playMode:r.value.categories?.includes("multiplayer")?"MultiPlayer":"SinglePlayer",applicationCategory:"Game",operatingSystem:"Web Browser",gamePlatform:r.value.platform||["Web Browser"],genre:r.value.categories||["Games"],offers:{"@type":"Offer",price:"0",priceCurrency:"USD",availability:"https://schema.org/InStock"},aggregateRating:{"@type":"AggregateRating",ratingValue:(r.value?.rating||9).toString(),ratingCount:(r.value?.votes||1e4).toString(),bestRating:"10",worstRating:"1"},publisher:{"@type":"Organization",name:"PizaGame",alternateName:["Pizza Edition","The Pizza Edition"],url:y}})},{type:"application/ld+json",innerHTML:JSON.stringify({"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"PizaGame",item:y},{"@type":"ListItem",position:2,name:"Games",item:`${y}/games`},{"@type":"ListItem",position:3,name:r.value.title||"Game",item:M}]})}]})})}function Re(r){if(r.value?.url)try{const s=new URL(r.value.url).origin;re({link:[{rel:"preconnect",href:s,crossorigin:"anonymous"},{rel:"dns-prefetch",href:s}]})}catch{}}function Le(){const r=g(null),s=g(!1),y="pseudo-fullscreen-lock",h=typeof navigator<"u"&&/iP(ad|hone|od)/i.test(navigator.userAgent||""),G=typeof Element<"u"&&!!(Element.prototype.requestFullscreen||Element.prototype.webkitRequestFullscreen||Element.prototype.mozRequestFullScreen||Element.prototype.msRequestFullscreen),R=()=>document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement,P=z=>{if(!z)return;const te=z.requestFullscreen||z.webkitRequestFullscreen||z.mozRequestFullScreen||z.msRequestFullscreen;te&&te.call(z)?.catch(Pe=>{console.error(`Error attempting to enable fullscreen: ${Pe.message}`)})},M=()=>{const z=document.exitFullscreen||document.webkitExitFullscreen||document.mozCancelFullScreen||document.msExitFullscreen;z&&z.call(document)?.catch(te=>{console.error(`Error attempting to exit fullscreen: ${te.message}`)})},f=()=>document.body.classList.add(y),E=()=>document.body.classList.remove(y),F=()=>{R()||(s.value=!1,E())},Q=()=>{document.visibilityState==="visible"&&!s.value&&!R()&&E()},X=()=>{!s.value&&!R()&&E()};return me(s,z=>{typeof document>"u"||(z?f():E())}),j(()=>{typeof document>"u"||(E(),document.addEventListener("fullscreenchange",F),document.addEventListener("webkitfullscreenchange",F),window.addEventListener("pageshow",X),document.addEventListener("visibilitychange",Q))}),de(()=>{E(),typeof document<"u"&&(document.removeEventListener("fullscreenchange",F),document.removeEventListener("webkitfullscreenchange",F),window.removeEventListener("pageshow",X),document.removeEventListener("visibilitychange",Q))}),{containerRef:r,pseudoFullscreen:s,toggleFullscreen:()=>{if(r.value){if(R()){M();return}if(s.value){s.value=!1,E();return}G&&!h?P(r.value):s.value=!0}}}}function Te(r,s){const y=g(null),h=g(!1),G=()=>new Promise((f,E)=>{if(typeof window.RufflePlayer<"u"||typeof window.Ruffle<"u"){f();return}const F=document.createElement("script");F.src="https://unpkg.com/@ruffle-rs/ruffle",F.async=!0,F.onload=()=>{let Q=0;const X=()=>{typeof window.RufflePlayer<"u"||typeof window.Ruffle<"u"?f():Q<50?(Q++,setTimeout(X,100)):E(new Error("Ruffle failed to initialize"))};X()},F.onerror=()=>E(new Error("Failed to load Ruffle script")),document.body.appendChild(F)}),R=()=>typeof window.RufflePlayer<"u"?window.RufflePlayer.newest():typeof window.Ruffle<"u"?window.Ruffle.newest():null,P=async()=>{if(!(!s.value||!y.value||h.value||!r.value||typeof window>"u"))try{await G();const f=R();if(!f)throw new Error("Ruffle failed to initialize");const E=f.createPlayer();E.config={autoplay:"auto",unmuteOverlay:"visible",backgroundColor:"#000000",letterbox:"on",logLevel:"warn",upgradeToHttps:!0,allowScriptAccess:!1,allowNetworking:"all",quality:"high",scale:"showAll",allowFullscreen:!0},y.value.appendChild(E);let F=r.value.url;F.startsWith("http://")&&window.location.protocol==="https:"&&(F=F.replace("http://","https://")),await E.load(F),h.value=!0}catch(f){console.error("Error loading Flash game:",f),y.value&&(y.value.innerHTML=`
          <div style="display: flex; align-items: center; justify-content: center; height: 100%; color: white; flex-direction: column; gap: 1rem;">
            <p>Error loading Flash game</p>
            <p style="font-size: 0.9rem; color: #999;">${f instanceof Error?f.message:"Unknown error"}</p>
          </div>
        `)}},M=()=>{y.value&&(y.value.innerHTML="",h.value=!1,P())};return me(()=>r.value?.slug,()=>{s.value&&M()}),j(()=>{s.value&&Ae(()=>P())}),de(()=>{y.value&&(y.value.innerHTML="",h.value=!1)}),{containerRef:y,isLoaded:h,reload:M}}function Ie(){const r=B(()=>t.value?.rating||9),s=B(()=>(t.value?.votes||0).toLocaleString()),y=g(!1),h=g(!1),G=g("");return{rating:r,votes:s,showShare:y,showToast:h,toastMessage:G,copyLink:()=>{navigator.clipboard.writeText(window.location.href),y.value=!1,G.value="Link copied to clipboard!",h.value=!0,setTimeout(()=>{h.value=!1},3e3)}}}return(r,s)=>{const y=Oe,h=oe,G=st,R=Ue,P=jt,M=De;return o(),a("div",Wt,[l(t)?(o(),a("div",Jt,[e("div",Kt,[e("div",Yt,[e("div",{ref_key:"gamePlayerContainer",ref:W,class:V(["game-player",{"pseudo-fullscreen":l(J)}])},[v(y,null,{fallback:H(()=>[l(A)?(o(),a("div",Qt,[...s[3]||(s[3]=[e("p",null,"Loading Flash player...",-1)])])):_("",!0)]),default:H(()=>[l(A)?(o(),a("div",{key:0,ref_key:"ruffleContainer",ref:K,class:"ruffle-container"},null,512)):_("",!0)]),_:1}),l(A)?_("",!0):(o(),a("iframe",{key:0,src:l(Se),title:"game",loading:"lazy",allowfullscreen:"",scrolling:"no",allow:`
                autoplay;
                fullscreen;
                geolocation;
                microphone;
                camera;
                midi;
              `},null,8,Xt))],2),e("div",Zt,[e("div",en,[e("h1",tn,d(l(t).title),1),e("div",nn,[e("div",sn,[v(h,{name:"fa6-solid:star"}),v(h,{name:"fa6-solid:star"}),v(h,{name:"fa6-solid:star"}),v(h,{name:"fa6-solid:star"}),v(h,{name:"fa6-solid:star-half-stroke"})]),e("span",on,d(l(S)),1),e("span",an,"("+d(l(m))+" votes)",1)])]),e("div",ln,[e("button",{onClick:Fe,class:"tool-btn",title:"Reload"},[v(h,{name:"fa6-solid:rotate-right"})]),e("button",{class:"tool-btn",title:"Share",onClick:s[1]||(s[1]=f=>L.value=!l(L))},[v(h,{name:"fa6-solid:share-nodes"}),l(L)?(o(),a("div",rn,[e("button",{onClick:s[0]||(s[0]=(...f)=>l(D)&&l(D)(...f))},"Copy Link")])):_("",!0)]),e("button",{class:"tool-btn highlight",title:"Fullscreen",onClick:s[2]||(s[2]=(...f)=>l(U)&&l(U)(...f))},[v(h,{name:"fa6-solid:expand"})])])])]),v(G,{class:"bookmark-reminder-container",title:`Bookmark ${l(t)?.title}`,description:`Save ${l(t)?.title} to easily play it again later!`,"modal-title":"Bookmark This Game","modal-tip":`ðŸ’¡ This way you can easily find ${l(t)?.title} again!`},null,8,["title","description","modal-tip"]),e("div",cn,[e("div",un,[e("div",dn,[e("h2",null,"About "+d(l(t).title),1)]),e("div",mn,[l(t).content?(o(),a("div",fn,[e("p",null,d(l(t).content),1)])):(o(),a("div",vn,[e("p",null,[s[4]||(s[4]=T(" Play ",-1)),e("strong",null,d(l(t).title),1),T(" online for free on Pizza Edition. It is a popular "+d(l(t).categories?.[0])+" game that you can play on your browser. ",1)])])),s[9]||(s[9]=e("h3",null,"Features",-1)),s[10]||(s[10]=e("ul",{class:"features-list"},[e("li",null,"Smooth and responsive gameplay"),e("li",null,"Play directly in your browser"),e("li",null,"No installation required"),e("li",null,"Mobile and desktop compatible")],-1)),l(t).keybindings?(o(),a("div",gn,[s[5]||(s[5]=e("h3",null,"Keybindings",-1)),e("div",pn,[e("p",null,d(l(t).keybindings),1)])])):_("",!0),e("div",hn,[e("div",yn,[s[6]||(s[6]=e("span",{class:"tech-label"},"Developer",-1)),e("span",kn,d(l(t).developer||"Pizza Edition"),1)]),e("div",bn,[s[7]||(s[7]=e("span",{class:"tech-label"},"Platform",-1)),e("span",_n,d(Array.isArray(l(t).platform)?l(t).platform.join(", "):l(t).platform||"Web Browser"),1)]),e("div",wn,[s[8]||(s[8]=e("span",{class:"tech-label"},"Last Updated",-1)),e("span",$n,d(l(t).lastUpdated||"October 2024"),1)])])]),e("div",Cn,[(o(!0),a(ne,null,se(l(t).categories,f=>(o(),N(R,{key:f,to:`/category/${f}`,class:"tag-chip"},{default:H(()=>[T(d(f),1)]),_:2},1032,["to"]))),128))])]),l(t)?.id?(o(),N(P,{key:0,"game-id":l(t).id},null,8,["game-id"])):_("",!0)])]),e("aside",Sn,[e("div",En,[s[11]||(s[11]=e("h3",{class:"sidebar-header"},"Recommended Games",-1)),e("div",Fn,[(o(!0),a(ne,null,se(l(I),f=>(o(),N(M,{key:f.slug,game:f,"aspect-ratio":"1"},null,8,["game"]))),128))])])])])):(o(),a("div",xn,[s[13]||(s[13]=e("h2",null,"Game not found",-1)),v(R,{to:"/",class:"btn-primary"},{default:H(()=>[...s[12]||(s[12]=[T("Go Home",-1)])]),_:1})])),(o(),N(ye,{to:"body"},[v(ke,{name:"toast",appear:""},{default:H(()=>[l(Y)?(o(),a("div",Rn,[v(h,{name:"fa6-solid:check-circle"}),e("span",null,d(l(O)),1)])):_("",!0)]),_:1})]))])}}}),Mn=Z(Ln,[["__scopeId","data-v-985d5195"]]);export{Mn as default};
