import{_ as X,q as p,C as M,j as I,c as v,o as r,a as e,n as U,b as c,m as Z,t as u,d as E,v as P,y as Ce,T as ee,E as V,s as D,G as Le,H as Ee,f as Te,i as K,l as Se,I as $e,J as Fe,u as H,K as Re,k as s,x as xe,w as G,L as Ge,F as Y,r as Q,e as Pe,M as ze}from"./CwGGYkXo.js";import{_ as Be}from"./BeMOFgEI.js";import{u as Me}from"./DwDLpZlf.js";const Ne={class:"bookmark-reminder"},Ue={class:"bookmark-content"},Ie={class:"bookmark-left"},Oe={class:"bookmark-text"},qe={class:"bookmark-right"},Ae={class:"bookmark-shortcut"},He={class:"shortcut-key"},Ve={class:"modal-content"},De={class:"modal-header"},We={class:"modal-icon"},je={class:"modal-body"},Je={class:"key"},Ke={class:"modal-tip"},Ye={__name:"BookmarkReminder",props:{title:{type:String,default:"Bookmark This Page"},description:{type:String,default:"Save this page to easily find it again later!"},buttonText:{type:String,default:"Bookmark Now"},modalTitle:{type:String,default:"Bookmark This Page"},modalTip:{type:String,default:"ðŸ’¡ This way you can easily find this page again!"},bookmarkUrl:{type:String,default:null},bookmarkTitle:{type:String,default:null}},setup(h){const d=h,k=p(!1),S=p(!1);M(()=>{S.value=navigator.userAgent.toLowerCase().indexOf("mac")!==-1});const b=I(()=>S.value?"âŒ˜":"Ctrl"),w=I(()=>S.value?"Cmd":"Ctrl"),$=()=>{k.value=!1};function T(F,o){try{return window.sidebar&&window.sidebar.addPanel?(window.sidebar.addPanel(o,F,""),!0):window.external&&window.external.AddFavorite?(window.external.AddFavorite(F,o),!0):!1}catch{return!1}}const W=()=>{const F=d.bookmarkUrl??window.location.href,o=d.bookmarkTitle??document.title;T(F,o)||(k.value=!0)};return(F,o)=>{const R=Z;return r(),v("div",null,[e("div",Ne,[e("div",Ue,[e("div",Ie,[c(R,{name:"fa6-solid:bookmark",class:"bookmark-icon"}),e("div",Oe,[e("h3",null,u(h.title),1),e("p",null,u(h.description),1)])]),e("div",qe,[e("div",Ae,[e("kbd",He,u(b.value),1),o[0]||(o[0]=e("span",{class:"shortcut-plus"},"+",-1)),o[1]||(o[1]=e("kbd",{class:"shortcut-key"},"D",-1))]),e("button",{class:"bookmark-btn",onClick:W},[c(R,{name:"fa6-solid:star"}),E(" "+u(h.buttonText),1)])])])]),(r(),U(ee,{to:"body"},[k.value?(r(),v("div",{key:0,class:"modal-overlay",onClick:Ce($,["self"])},[e("div",Ve,[e("div",De,[e("div",We,[c(R,{name:"fa6-solid:bookmark"})]),e("h3",null,u(h.modalTitle),1),e("button",{class:"modal-close",onClick:$,"aria-label":"Close"},[c(R,{name:"fa6-solid:times"})])]),e("div",je,[e("p",null,[o[2]||(o[2]=E(" Press ",-1)),e("kbd",Je,u(w.value),1),o[3]||(o[3]=E(" + ",-1)),o[4]||(o[4]=e("kbd",{class:"key"},"D",-1)),o[5]||(o[5]=E(" to bookmark this page ",-1))]),e("p",Ke,u(h.modalTip),1)]),e("div",{class:"modal-footer"},[e("button",{class:"modal-btn primary",onClick:$}," Got it! ")])])])):P("",!0)]))])}}},Qe=Object.assign(X(Ye,[["__scopeId","data-v-073df4f4"]]),{__name:"BookmarkReminder"});function Xe(h){const d=p(!1),k=p(!1),S=async()=>{if(!(!h.value?.url||k.value)){k.value=!0;try{const w=new AbortController,$=setTimeout(()=>w.abort(),5e3),T=await fetch(h.value.url,{method:"GET",signal:w.signal,cache:"no-store"});clearTimeout($),T.ok?(d.value=!1,console.log("Game URL is accessible (20x):",h.value.url,T.status)):(d.value=!0,console.log("Game URL is NOT accessible (non-20x):",h.value.url,T.status))}catch(w){d.value=!0,console.log("Game URL is NOT accessible (error):",h.value.url,w.name)}finally{k.value=!1}}},b=()=>{document.visibilityState==="visible"&&S()};return M(()=>{S(),typeof document<"u"&&document.addEventListener("visibilitychange",b)}),V(()=>{typeof document<"u"&&document.removeEventListener("visibilitychange",b)}),D(d,w=>{console.log("Game URL accessible:",!w)}),{isOffline:d,isCheckingAccessibility:k,checkAccessibie:S}}const Ze={class:"game-page"},et={key:0,class:"game-layout"},tt={class:"main-column"},ot={class:"game-container-wrapper"},nt={key:0,class:"ruffle-container",style:{display:"flex","align-items":"center","justify-content":"center",color:"white"}},st=["src"],at={class:"game-bar"},lt={class:"game-bar-left"},it={class:"game-title"},rt={class:"game-rating"},ct={class:"stars"},ut={class:"rating-score"},dt={class:"rating-count"},mt={class:"game-bar-right"},ft={key:0,class:"share-popover"},pt={class:"game-content-grid"},gt={class:"game-description-card"},vt={class:"desc-header"},yt={class:"desc-content"},ht={key:0,class:"game-description"},kt={key:1,class:"game-description"},bt={key:2,class:"game-keybindings"},wt={class:"keybindings-content"},_t={class:"tech-info"},Ct={class:"tech-item"},Lt={class:"tech-value"},Et={class:"game-tags"},Tt={class:"sidebar-column"},St={class:"sidebar-content"},$t={class:"games-grid"},Ft={key:1,class:"not-found"},Rt={key:0,class:"toast-notification"},xt=Le({__name:"[slug]",async setup(h){let d,k;const b=Ee().params.slug,w=Te(),$=w.public.siteUrl||"https://pizagame.com",T=w.public.siteTarget||"production",F=T==="github"?"github io":T==="bitbucket"?"bitbucket io":T==="gitlab"?"gitlab io":"",{data:o}=([d,k]=K(()=>Se(`/api/games/${b}`,{key:`game-${b}`},"$h3TYe2aeyH")),d=await d,k(),d),{data:R}=([d,k]=K(()=>$e(`/api/games/similar/${b}`,{key:`similar-${b}`,default:()=>[]},"$m6kVydA0vn")),d=await d,k(),d),x=I(()=>o.value?.format==="flash");he(o),ye(o,b,$,F);const{containerRef:te,pseudoFullscreen:oe,toggleFullscreen:j}=ke(),{containerRef:ne,reload:se}=be(o,x),{rating:ae,votes:le,showShare:O,showToast:ie,toastMessage:re,copyLink:J}=we(),{isGameCached:ce,getCacheStatus:ue,getCachedGameUrl:de}=Me(),q=p(!1);p(!1);const me=p("none"),{isOffline:fe}=Xe(o),pe=I(()=>!o.value||x.value?"":q.value?ge():fe.value?`/api/game-proxy?url=${encodeURIComponent(o.value.url)}`:o.value.url),A=p(""),ge=n=>A.value?A.value:"";M(async()=>{if(o.value&&b){const n=String(b);if(q.value=await ce(n),me.value=await ue(n),q.value){const t=await de(n);t&&(A.value=t)}}});const ve=()=>{if(x.value)se();else{const n=document.querySelector("iframe");n&&(n.src=n.src)}};function ye(n,t,l,a){Fe(()=>{if(!n.value)return;const _=`${n.value.title||"Game"} - Pizza Edition | Play Unblocked Full Screen`,y=a?`${_} ${a}`:_,C=n.value.description,i=`${l}/games/${n.value.slug||t}`,g=n.value.image?`${l}${n.value.image}`:`${l}/media/og-image.webp`,m=n.value.keywords||"",f=a?`${m}, ${a}`:m;H({title:y,meta:[{property:"og:title",content:y},{name:"description",content:C},{property:"og:description",content:C},{property:"og:image",content:g},{property:"og:url",content:i},{property:"og:type",content:"website"},{name:"twitter:title",content:y},{name:"twitter:description",content:C},{name:"twitter:image",content:g},{name:"keywords",content:f}]}),H({link:[{rel:"canonical",href:i}],script:[{type:"application/ld+json",innerHTML:JSON.stringify({"@context":"https://schema.org","@type":"VideoGame",name:n.value.title||"Game",alternateName:`${n.value.title||"Game"} Pizza Edition`,description:C,url:i,image:g,playMode:"SinglePlayer",applicationCategory:"Game",operatingSystem:"Web Browser",gamePlatform:["Web Browser","Desktop","Mobile"],genre:n.value.categories||["Games"],offers:{"@type":"Offer",price:"0",priceCurrency:"USD",availability:"https://schema.org/InStock"},aggregateRating:{"@type":"AggregateRating",ratingValue:"4.6",ratingCount:"1000",bestRating:"5",worstRating:"1"},publisher:{"@type":"Organization",name:"PizaGame",alternateName:["Pizza Edition","The Pizza Edition"],url:l}})},{type:"application/ld+json",innerHTML:JSON.stringify({"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"PizaGame",item:l},{"@type":"ListItem",position:2,name:"Games",item:`${l}/games`},{"@type":"ListItem",position:3,name:n.value.title||"Game",item:i}]})}]})})}function he(n){if(n.value?.url)try{const t=new URL(n.value.url).origin;H({link:[{rel:"preconnect",href:t,crossorigin:"anonymous"},{rel:"dns-prefetch",href:t}]})}catch{}}function ke(){const n=p(null),t=p(!1),l="pseudo-fullscreen-lock",a=typeof navigator<"u"&&/iP(ad|hone|od)/i.test(navigator.userAgent||""),_=typeof Element<"u"&&!!(Element.prototype.requestFullscreen||Element.prototype.webkitRequestFullscreen||Element.prototype.mozRequestFullScreen||Element.prototype.msRequestFullscreen),y=()=>document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement,C=L=>{if(!L)return;const N=L.requestFullscreen||L.webkitRequestFullscreen||L.mozRequestFullScreen||L.msRequestFullscreen;N&&N.call(L)?.catch(_e=>{console.error(`Error attempting to enable fullscreen: ${_e.message}`)})},i=()=>{const L=document.exitFullscreen||document.webkitExitFullscreen||document.mozCancelFullScreen||document.msExitFullscreen;L&&L.call(document)?.catch(N=>{console.error(`Error attempting to exit fullscreen: ${N.message}`)})},g=()=>document.body.classList.add(l),m=()=>document.body.classList.remove(l),f=()=>{y()||(t.value=!1,m())},z=()=>{document.visibilityState==="visible"&&!t.value&&!y()&&m()},B=()=>{!t.value&&!y()&&m()};return D(t,L=>{typeof document>"u"||(L?g():m())}),M(()=>{typeof document>"u"||(m(),document.addEventListener("fullscreenchange",f),document.addEventListener("webkitfullscreenchange",f),window.addEventListener("pageshow",B),document.addEventListener("visibilitychange",z))}),V(()=>{m(),typeof document<"u"&&(document.removeEventListener("fullscreenchange",f),document.removeEventListener("webkitfullscreenchange",f),window.removeEventListener("pageshow",B),document.removeEventListener("visibilitychange",z))}),{containerRef:n,pseudoFullscreen:t,toggleFullscreen:()=>{if(n.value){if(y()){i();return}if(t.value){t.value=!1,m();return}_&&!a?C(n.value):t.value=!0}}}}function be(n,t){const l=p(null),a=p(!1),_=()=>new Promise((g,m)=>{if(typeof window.RufflePlayer<"u"||typeof window.Ruffle<"u"){g();return}const f=document.createElement("script");f.src="https://unpkg.com/@ruffle-rs/ruffle",f.async=!0,f.onload=()=>{let z=0;const B=()=>{typeof window.RufflePlayer<"u"||typeof window.Ruffle<"u"?g():z<50?(z++,setTimeout(B,100)):m(new Error("Ruffle failed to initialize"))};B()},f.onerror=()=>m(new Error("Failed to load Ruffle script")),document.body.appendChild(f)}),y=()=>typeof window.RufflePlayer<"u"?window.RufflePlayer.newest():typeof window.Ruffle<"u"?window.Ruffle.newest():null,C=async()=>{if(!(!t.value||!l.value||a.value||!n.value||typeof window>"u"))try{await _();const g=y();if(!g)throw new Error("Ruffle failed to initialize");const m=g.createPlayer();m.config={autoplay:"auto",unmuteOverlay:"visible",backgroundColor:"#000000",letterbox:"on",logLevel:"warn",upgradeToHttps:!0,allowScriptAccess:!1,allowNetworking:"all",quality:"high",scale:"showAll",allowFullscreen:!0},l.value.appendChild(m);let f=n.value.url;f.startsWith("http://")&&window.location.protocol==="https:"&&(f=f.replace("http://","https://")),await m.load(f),a.value=!0}catch(g){console.error("Error loading Flash game:",g),l.value&&(l.value.innerHTML=`
          <div style="display: flex; align-items: center; justify-content: center; height: 100%; color: white; flex-direction: column; gap: 1rem;">
            <p>Error loading Flash game</p>
            <p style="font-size: 0.9rem; color: #999;">${g instanceof Error?g.message:"Unknown error"}</p>
          </div>
        `)}},i=()=>{l.value&&(l.value.innerHTML="",a.value=!1,C())};return D(()=>n.value?.slug,()=>{t.value&&i()}),M(()=>{t.value&&Re(()=>C())}),V(()=>{l.value&&(l.value.innerHTML="",a.value=!1)}),{containerRef:l,isLoaded:a,reload:i}}function we(){const n=p(9.2),t=p("464,392"),l=p(!1),a=p(!1),_=p("");return{rating:n,votes:t,showShare:l,showToast:a,toastMessage:_,copyLink:()=>{navigator.clipboard.writeText(window.location.href),l.value=!1,_.value="Link copied to clipboard!",a.value=!0,setTimeout(()=>{a.value=!1},3e3)}}}return(n,t)=>{const l=Ge,a=Z,_=Qe,y=Pe,C=Be;return r(),v("div",Ze,[s(o)?(r(),v("div",et,[e("div",tt,[e("div",ot,[e("div",{ref_key:"gamePlayerContainer",ref:te,class:xe(["game-player",{"pseudo-fullscreen":s(oe)}])},[c(l,null,{fallback:G(()=>[s(x)?(r(),v("div",nt,[...t[3]||(t[3]=[e("p",null,"Loading Flash player...",-1)])])):P("",!0)]),default:G(()=>[s(x)?(r(),v("div",{key:0,ref_key:"ruffleContainer",ref:ne,class:"ruffle-container"},null,512)):P("",!0)]),_:1}),s(x)?P("",!0):(r(),v("iframe",{key:0,src:s(pe),title:"game",loading:"lazy",allowfullscreen:"",scrolling:"no",allow:`
                autoplay;
                fullscreen;
                geolocation;
                microphone;
                camera;
                midi;
              `},null,8,st))],2),e("div",at,[e("div",lt,[e("h1",it,u(s(o).title),1),e("div",rt,[e("div",ct,[c(a,{name:"fa6-solid:star"}),c(a,{name:"fa6-solid:star"}),c(a,{name:"fa6-solid:star"}),c(a,{name:"fa6-solid:star"}),c(a,{name:"fa6-solid:star-half-alt"})]),e("span",ut,u(s(ae)),1),e("span",dt,"("+u(s(le))+" votes)",1)])]),e("div",mt,[e("button",{onClick:ve,class:"tool-btn",title:"Reload"},[c(a,{name:"fa6-solid:rotate-right"})]),e("button",{class:"tool-btn",title:"Share",onClick:t[1]||(t[1]=i=>O.value=!s(O))},[c(a,{name:"fa6-solid:share-nodes"}),s(O)?(r(),v("div",ft,[e("button",{onClick:t[0]||(t[0]=(...i)=>s(J)&&s(J)(...i))},"Copy Link")])):P("",!0)]),e("button",{class:"tool-btn highlight",title:"Fullscreen",onClick:t[2]||(t[2]=(...i)=>s(j)&&s(j)(...i))},[c(a,{name:"fa6-solid:expand"})])])])]),c(_,{class:"bookmark-reminder-container",title:`Bookmark ${s(o)?.title}`,description:`Save ${s(o)?.title} to easily play it again later!`,"modal-title":"Bookmark This Game","modal-tip":`ðŸ’¡ This way you can easily find ${s(o)?.title} again!`},null,8,["title","description","modal-tip"]),e("div",pt,[e("div",gt,[e("div",vt,[e("h2",null,"About "+u(s(o).title),1)]),e("div",yt,[s(o).content?(r(),v("div",ht,[e("p",null,u(s(o).content),1)])):(r(),v("div",kt,[e("p",null,[t[4]||(t[4]=E(" Play ",-1)),e("strong",null,u(s(o).title),1),E(" online for free on Pizza Edition. It is a popular "+u(s(o).categories?.[0])+" game that you can play on your browser. ",1)])])),t[10]||(t[10]=e("h3",null,"Features",-1)),t[11]||(t[11]=e("ul",{class:"features-list"},[e("li",null,"Smooth and responsive gameplay"),e("li",null,"Play directly in your browser"),e("li",null,"No installation required"),e("li",null,"Mobile and desktop compatible")],-1)),s(o).keybindings?(r(),v("div",bt,[t[5]||(t[5]=e("h3",null,"Keybindings",-1)),e("div",wt,[e("p",null,u(s(o).keybindings),1)])])):P("",!0),e("div",_t,[t[8]||(t[8]=e("div",{class:"tech-item"},[e("span",{class:"tech-label"},"Developer"),e("span",{class:"tech-value"},"Pizza Edition")],-1)),e("div",Ct,[t[7]||(t[7]=e("span",{class:"tech-label"},"Platform",-1)),e("span",Lt,[c(l,null,{fallback:G(()=>[...t[6]||(t[6]=[E(" Web Browser (HTML5) ",-1)])]),default:G(()=>[E(u(s(x)?"Web Browser (Flash via Ruffle)":"Web Browser (HTML5)")+" ",1)]),_:1})])]),t[9]||(t[9]=e("div",{class:"tech-item"},[e("span",{class:"tech-label"},"Last Updated"),e("span",{class:"tech-value"},"October 2024")],-1))])]),e("div",Et,[(r(!0),v(Y,null,Q(s(o).categories,i=>(r(),U(y,{key:i,to:`/category/${i}`,class:"tag-chip"},{default:G(()=>[E(u(i),1)]),_:2},1032,["to"]))),128))])])])]),e("aside",Tt,[e("div",St,[t[12]||(t[12]=e("h3",{class:"sidebar-header"},"Recommended Games",-1)),e("div",$t,[(r(!0),v(Y,null,Q(s(R),i=>(r(),U(C,{key:i.slug,game:i,"aspect-ratio":"1"},null,8,["game"]))),128))])])])])):(r(),v("div",Ft,[t[14]||(t[14]=e("h2",null,"Game not found",-1)),c(y,{to:"/",class:"btn-primary"},{default:G(()=>[...t[13]||(t[13]=[E("Go Home",-1)])]),_:1})])),(r(),U(ee,{to:"body"},[c(ze,{name:"toast",appear:""},{default:G(()=>[s(ie)?(r(),v("div",Rt,[c(a,{name:"fa6-solid:check-circle"}),e("span",null,u(s(re)),1)])):P("",!0)]),_:1})]))])}}}),Mt=X(xt,[["__scopeId","data-v-18e4ecf6"]]);export{Mt as default};
