import{_ as Z,q as v,D as N,j as P,c as g,o as c,a as e,n as A,b as f,m as ee,t as r,d as $,x as F,z as Se,T as te,I as V,v as D,G as Ee,J as Le,f as $e,i as K,K as Te,u as H,L as Re,k as s,y as xe,w as M,F as Y,r as Q,M as Fe,N as Ge,e as Pe,l as X}from"./DpRmwC_T.js";import{_ as ze}from"./Br8Cx9Up.js";import{u as Be}from"./BJRfV6U9.js";const Me={class:"bookmark-reminder"},Ne={class:"bookmark-content"},Ue={class:"bookmark-left"},Ae={class:"bookmark-text"},Ie={class:"bookmark-right"},Oe={class:"bookmark-shortcut"},qe={class:"shortcut-key"},He={class:"modal-content"},Ve={class:"modal-header"},De={class:"modal-icon"},je={class:"modal-body"},We={class:"key"},Je={class:"modal-tip"},Ke={__name:"BookmarkReminder",props:{title:{type:String,default:"Bookmark This Page"},description:{type:String,default:"Save this page to easily find it again later!"},buttonText:{type:String,default:"Bookmark Now"},modalTitle:{type:String,default:"Bookmark This Page"},modalTip:{type:String,default:"ðŸ’¡ This way you can easily find this page again!"},bookmarkUrl:{type:String,default:null},bookmarkTitle:{type:String,default:null}},setup(h){const u=h,k=v(!1),L=v(!1);N(()=>{L.value=navigator.userAgent.toLowerCase().indexOf("mac")!==-1});const b=P(()=>L.value?"âŒ˜":"Ctrl"),w=P(()=>L.value?"Cmd":"Ctrl"),T=()=>{k.value=!1};function E(R,o){try{return window.sidebar&&window.sidebar.addPanel?(window.sidebar.addPanel(o,R,""),!0):window.external&&window.external.AddFavorite?(window.external.AddFavorite(R,o),!0):!1}catch{return!1}}const j=()=>{const R=u.bookmarkUrl??window.location.href,o=u.bookmarkTitle??document.title;E(R,o)||(k.value=!0)};return(R,o)=>{const x=ee;return c(),g("div",null,[e("div",Me,[e("div",Ne,[e("div",Ue,[f(x,{name:"fa6-solid:bookmark",class:"bookmark-icon"}),e("div",Ae,[e("h3",null,r(h.title),1),e("p",null,r(h.description),1)])]),e("div",Ie,[e("div",Oe,[e("kbd",qe,r(b.value),1),o[0]||(o[0]=e("span",{class:"shortcut-plus"},"+",-1)),o[1]||(o[1]=e("kbd",{class:"shortcut-key"},"D",-1))]),e("button",{class:"bookmark-btn",onClick:j},[f(x,{name:"fa6-solid:star"}),$(" "+r(h.buttonText),1)])])])]),(c(),A(te,{to:"body"},[k.value?(c(),g("div",{key:0,class:"modal-overlay",onClick:Se(T,["self"])},[e("div",He,[e("div",Ve,[e("div",De,[f(x,{name:"fa6-solid:bookmark"})]),e("h3",null,r(h.modalTitle),1),e("button",{class:"modal-close",onClick:T,"aria-label":"Close"},[f(x,{name:"fa6-solid:times"})])]),e("div",je,[e("p",null,[o[2]||(o[2]=$(" Press ",-1)),e("kbd",We,r(w.value),1),o[3]||(o[3]=$(" + ",-1)),o[4]||(o[4]=e("kbd",{class:"key"},"D",-1)),o[5]||(o[5]=$(" to bookmark this page ",-1))]),e("p",Je,r(h.modalTip),1)]),e("div",{class:"modal-footer"},[e("button",{class:"modal-btn primary",onClick:T}," Got it! ")])])])):F("",!0)]))])}}},Ye=Object.assign(Z(Ke,[["__scopeId","data-v-073df4f4"]]),{__name:"BookmarkReminder"});function Qe(h){const u=v(!1),k=v(!1),L=async()=>{if(!(!h.value?.url||k.value)){k.value=!0;try{const w=new AbortController,T=setTimeout(()=>w.abort(),5e3),E=await fetch(h.value.url,{method:"GET",signal:w.signal,cache:"no-store"});clearTimeout(T),E.ok?(u.value=!1,console.log("Game URL is accessible (20x):",h.value.url,E.status)):(u.value=!0,console.log("Game URL is NOT accessible (non-20x):",h.value.url,E.status))}catch(w){u.value=!0,console.log("Game URL is NOT accessible (error):",h.value.url,w.name)}finally{k.value=!1}}},b=()=>{document.visibilityState==="visible"&&L()};return N(()=>{L(),typeof document<"u"&&document.addEventListener("visibilitychange",b)}),V(()=>{typeof document<"u"&&document.removeEventListener("visibilitychange",b)}),D(u,w=>{console.log("Game URL accessible:",!w)}),{isOffline:u,isCheckingAccessibility:k,checkAccessibie:L}}const Xe={class:"game-page"},Ze={key:0,class:"game-layout"},et={class:"main-column"},tt={class:"game-container-wrapper"},ot={key:0,class:"ruffle-container",style:{display:"flex","align-items":"center","justify-content":"center",color:"white"}},nt=["src"],st={class:"game-bar"},at={class:"game-bar-left"},lt={class:"game-title"},it={class:"game-rating"},rt={class:"stars"},ct={class:"rating-score"},ut={class:"rating-count"},dt={class:"game-bar-right"},mt={key:0,class:"share-popover"},ft={class:"game-content-grid"},pt={class:"game-description-card"},gt={class:"desc-header"},vt={class:"desc-content"},yt={key:0,class:"game-description"},ht={key:1,class:"game-description"},kt={key:2,class:"game-keybindings"},bt={class:"keybindings-content"},_t={class:"tech-info"},wt={class:"tech-item"},Ct={class:"tech-value"},St={class:"tech-item"},Et={class:"tech-value"},Lt={class:"tech-item"},$t={class:"tech-value"},Tt={class:"game-tags"},Rt={class:"sidebar-column"},xt={class:"sidebar-content"},Ft={class:"games-grid"},Gt={key:1,class:"not-found"},Pt={key:0,class:"toast-notification"},zt=Ee({__name:"[slug]",async setup(h){let u,k;const b=Le().params.slug,w=$e(),T=w.public.siteUrl||"https://pizagame.com",E=w.public.siteTarget||"production",R=E==="github"?"github io":E==="bitbucket"?"bitbucket io":E==="gitlab"?"gitlab io":"",{data:o}=([u,k]=K(()=>X(`/api/games/${b}`,{key:`game-${b}`},"$h3TYe2aeyH")),u=await u,k(),u),{data:x}=([u,k]=K(()=>X(`/api/games/similar/${b}`,{key:`similar-${b}`,default:()=>[]},"$m6kVydA0vn")),u=await u,k(),u),G=P(()=>o.value?.format==="flash");ke(o),he(o,b,T,R);const{containerRef:oe,pseudoFullscreen:ne,toggleFullscreen:W}=be(),{containerRef:se,reload:ae}=_e(o,G),{rating:le,votes:ie,showShare:I,showToast:re,toastMessage:ce,copyLink:J}=we(),{isGameCached:ue,getCacheStatus:de,getCachedGameUrl:me}=Be(),O=v(!1);v(!1);const fe=v("none"),{isOffline:pe}=Qe(o),ge=P(()=>!o.value||G.value?"":O.value?ve():pe.value?`/api/game-proxy?url=${encodeURIComponent(o.value.url)}`:o.value.url),q=v(""),ve=n=>q.value?q.value:"";N(async()=>{if(o.value&&b){const n=String(b);if(O.value=await ue(n),fe.value=await de(n),O.value){const t=await me(n);t&&(q.value=t)}}});const ye=()=>{if(G.value)ae();else{const n=document.querySelector("iframe");n&&(n.src=n.src)}};function he(n,t,l,a){Te(()=>{if(!n.value)return;const C=`${n.value.title||"Game"} - Pizza Edition, Play Unblocked Full Screen`,y=a?`${C} ${a}`:C,_=n.value.description,i=`${l}/games/${n.value.slug||t}`,p=n.value.image?`${l}${n.value.image}`:`${l}/media/og-image.webp`,d=n.value.keywords||"",m=a?`${d}, ${a}`:d;H({title:y,meta:[{property:"og:title",content:y},{name:"description",content:_},{property:"og:description",content:_},{property:"og:image",content:p},{property:"og:url",content:i},{property:"og:type",content:"website"},{name:"twitter:title",content:y},{name:"twitter:description",content:_},{name:"twitter:image",content:p},{name:"keywords",content:m}]}),H({link:[{rel:"canonical",href:i}],script:[{type:"application/ld+json",innerHTML:JSON.stringify({"@context":"https://schema.org","@type":"VideoGame",name:n.value.title||"Game",alternateName:`${n.value.title||"Game"} Pizza Edition`,description:_,url:i,image:p,playMode:n.value.categories?.includes("multiplayer")?"MultiPlayer":"SinglePlayer",applicationCategory:"Game",operatingSystem:"Web Browser",gamePlatform:n.value.platform||["Web Browser"],genre:n.value.categories||["Games"],offers:{"@type":"Offer",price:"0",priceCurrency:"USD",availability:"https://schema.org/InStock"},aggregateRating:{"@type":"AggregateRating",ratingValue:(n.value?.rating||9).toString(),ratingCount:(n.value?.votes||1e4).toString(),bestRating:"10",worstRating:"1"},publisher:{"@type":"Organization",name:"PizaGame",alternateName:["Pizza Edition","The Pizza Edition"],url:l}})},{type:"application/ld+json",innerHTML:JSON.stringify({"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"PizaGame",item:l},{"@type":"ListItem",position:2,name:"Games",item:`${l}/games`},{"@type":"ListItem",position:3,name:n.value.title||"Game",item:i}]})}]})})}function ke(n){if(n.value?.url)try{const t=new URL(n.value.url).origin;H({link:[{rel:"preconnect",href:t,crossorigin:"anonymous"},{rel:"dns-prefetch",href:t}]})}catch{}}function be(){const n=v(null),t=v(!1),l="pseudo-fullscreen-lock",a=typeof navigator<"u"&&/iP(ad|hone|od)/i.test(navigator.userAgent||""),C=typeof Element<"u"&&!!(Element.prototype.requestFullscreen||Element.prototype.webkitRequestFullscreen||Element.prototype.mozRequestFullScreen||Element.prototype.msRequestFullscreen),y=()=>document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement,_=S=>{if(!S)return;const U=S.requestFullscreen||S.webkitRequestFullscreen||S.mozRequestFullScreen||S.msRequestFullscreen;U&&U.call(S)?.catch(Ce=>{console.error(`Error attempting to enable fullscreen: ${Ce.message}`)})},i=()=>{const S=document.exitFullscreen||document.webkitExitFullscreen||document.mozCancelFullScreen||document.msExitFullscreen;S&&S.call(document)?.catch(U=>{console.error(`Error attempting to exit fullscreen: ${U.message}`)})},p=()=>document.body.classList.add(l),d=()=>document.body.classList.remove(l),m=()=>{y()||(t.value=!1,d())},z=()=>{document.visibilityState==="visible"&&!t.value&&!y()&&d()},B=()=>{!t.value&&!y()&&d()};return D(t,S=>{typeof document>"u"||(S?p():d())}),N(()=>{typeof document>"u"||(d(),document.addEventListener("fullscreenchange",m),document.addEventListener("webkitfullscreenchange",m),window.addEventListener("pageshow",B),document.addEventListener("visibilitychange",z))}),V(()=>{d(),typeof document<"u"&&(document.removeEventListener("fullscreenchange",m),document.removeEventListener("webkitfullscreenchange",m),window.removeEventListener("pageshow",B),document.removeEventListener("visibilitychange",z))}),{containerRef:n,pseudoFullscreen:t,toggleFullscreen:()=>{if(n.value){if(y()){i();return}if(t.value){t.value=!1,d();return}C&&!a?_(n.value):t.value=!0}}}}function _e(n,t){const l=v(null),a=v(!1),C=()=>new Promise((p,d)=>{if(typeof window.RufflePlayer<"u"||typeof window.Ruffle<"u"){p();return}const m=document.createElement("script");m.src="https://unpkg.com/@ruffle-rs/ruffle",m.async=!0,m.onload=()=>{let z=0;const B=()=>{typeof window.RufflePlayer<"u"||typeof window.Ruffle<"u"?p():z<50?(z++,setTimeout(B,100)):d(new Error("Ruffle failed to initialize"))};B()},m.onerror=()=>d(new Error("Failed to load Ruffle script")),document.body.appendChild(m)}),y=()=>typeof window.RufflePlayer<"u"?window.RufflePlayer.newest():typeof window.Ruffle<"u"?window.Ruffle.newest():null,_=async()=>{if(!(!t.value||!l.value||a.value||!n.value||typeof window>"u"))try{await C();const p=y();if(!p)throw new Error("Ruffle failed to initialize");const d=p.createPlayer();d.config={autoplay:"auto",unmuteOverlay:"visible",backgroundColor:"#000000",letterbox:"on",logLevel:"warn",upgradeToHttps:!0,allowScriptAccess:!1,allowNetworking:"all",quality:"high",scale:"showAll",allowFullscreen:!0},l.value.appendChild(d);let m=n.value.url;m.startsWith("http://")&&window.location.protocol==="https:"&&(m=m.replace("http://","https://")),await d.load(m),a.value=!0}catch(p){console.error("Error loading Flash game:",p),l.value&&(l.value.innerHTML=`
          <div style="display: flex; align-items: center; justify-content: center; height: 100%; color: white; flex-direction: column; gap: 1rem;">
            <p>Error loading Flash game</p>
            <p style="font-size: 0.9rem; color: #999;">${p instanceof Error?p.message:"Unknown error"}</p>
          </div>
        `)}},i=()=>{l.value&&(l.value.innerHTML="",a.value=!1,_())};return D(()=>n.value?.slug,()=>{t.value&&i()}),N(()=>{t.value&&Re(()=>_())}),V(()=>{l.value&&(l.value.innerHTML="",a.value=!1)}),{containerRef:l,isLoaded:a,reload:i}}function we(){const n=P(()=>o.value?.rating||9),t=P(()=>(o.value?.votes||0).toLocaleString()),l=v(!1),a=v(!1),C=v("");return{rating:n,votes:t,showShare:l,showToast:a,toastMessage:C,copyLink:()=>{navigator.clipboard.writeText(window.location.href),l.value=!1,C.value="Link copied to clipboard!",a.value=!0,setTimeout(()=>{a.value=!1},3e3)}}}return(n,t)=>{const l=Ge,a=ee,C=Ye,y=Pe,_=ze;return c(),g("div",Xe,[s(o)?(c(),g("div",Ze,[e("div",et,[e("div",tt,[e("div",{ref_key:"gamePlayerContainer",ref:oe,class:xe(["game-player",{"pseudo-fullscreen":s(ne)}])},[f(l,null,{fallback:M(()=>[s(G)?(c(),g("div",ot,[...t[3]||(t[3]=[e("p",null,"Loading Flash player...",-1)])])):F("",!0)]),default:M(()=>[s(G)?(c(),g("div",{key:0,ref_key:"ruffleContainer",ref:se,class:"ruffle-container"},null,512)):F("",!0)]),_:1}),s(G)?F("",!0):(c(),g("iframe",{key:0,src:s(ge),title:"game",loading:"lazy",allowfullscreen:"",scrolling:"no",allow:`
                autoplay;
                fullscreen;
                geolocation;
                microphone;
                camera;
                midi;
              `},null,8,nt))],2),e("div",st,[e("div",at,[e("h1",lt,r(s(o).title),1),e("div",it,[e("div",rt,[f(a,{name:"fa6-solid:star"}),f(a,{name:"fa6-solid:star"}),f(a,{name:"fa6-solid:star"}),f(a,{name:"fa6-solid:star"}),f(a,{name:"fa6-solid:star-half-stroke"})]),e("span",ct,r(s(le)),1),e("span",ut,"("+r(s(ie))+" votes)",1)])]),e("div",dt,[e("button",{onClick:ye,class:"tool-btn",title:"Reload"},[f(a,{name:"fa6-solid:rotate-right"})]),e("button",{class:"tool-btn",title:"Share",onClick:t[1]||(t[1]=i=>I.value=!s(I))},[f(a,{name:"fa6-solid:share-nodes"}),s(I)?(c(),g("div",mt,[e("button",{onClick:t[0]||(t[0]=(...i)=>s(J)&&s(J)(...i))},"Copy Link")])):F("",!0)]),e("button",{class:"tool-btn highlight",title:"Fullscreen",onClick:t[2]||(t[2]=(...i)=>s(W)&&s(W)(...i))},[f(a,{name:"fa6-solid:expand"})])])])]),f(C,{class:"bookmark-reminder-container",title:`Bookmark ${s(o)?.title}`,description:`Save ${s(o)?.title} to easily play it again later!`,"modal-title":"Bookmark This Game","modal-tip":`ðŸ’¡ This way you can easily find ${s(o)?.title} again!`},null,8,["title","description","modal-tip"]),e("div",ft,[e("div",pt,[e("div",gt,[e("h2",null,"About "+r(s(o).title),1)]),e("div",vt,[s(o).content?(c(),g("div",yt,[e("p",null,r(s(o).content),1)])):(c(),g("div",ht,[e("p",null,[t[4]||(t[4]=$(" Play ",-1)),e("strong",null,r(s(o).title),1),$(" online for free on Pizza Edition. It is a popular "+r(s(o).categories?.[0])+" game that you can play on your browser. ",1)])])),t[9]||(t[9]=e("h3",null,"Features",-1)),t[10]||(t[10]=e("ul",{class:"features-list"},[e("li",null,"Smooth and responsive gameplay"),e("li",null,"Play directly in your browser"),e("li",null,"No installation required"),e("li",null,"Mobile and desktop compatible")],-1)),s(o).keybindings?(c(),g("div",kt,[t[5]||(t[5]=e("h3",null,"Keybindings",-1)),e("div",bt,[e("p",null,r(s(o).keybindings),1)])])):F("",!0),e("div",_t,[e("div",wt,[t[6]||(t[6]=e("span",{class:"tech-label"},"Developer",-1)),e("span",Ct,r(s(o).developer||"Pizza Edition"),1)]),e("div",St,[t[7]||(t[7]=e("span",{class:"tech-label"},"Platform",-1)),e("span",Et,r(Array.isArray(s(o).platform)?s(o).platform.join(", "):s(o).platform||"Web Browser"),1)]),e("div",Lt,[t[8]||(t[8]=e("span",{class:"tech-label"},"Last Updated",-1)),e("span",$t,r(s(o).lastUpdated||"October 2024"),1)])])]),e("div",Tt,[(c(!0),g(Y,null,Q(s(o).categories,i=>(c(),A(y,{key:i,to:`/category/${i}`,class:"tag-chip"},{default:M(()=>[$(r(i),1)]),_:2},1032,["to"]))),128))])])])]),e("aside",Rt,[e("div",xt,[t[11]||(t[11]=e("h3",{class:"sidebar-header"},"Recommended Games",-1)),e("div",Ft,[(c(!0),g(Y,null,Q(s(x),i=>(c(),A(_,{key:i.slug,game:i,"aspect-ratio":"1"},null,8,["game"]))),128))])])])])):(c(),g("div",Gt,[t[13]||(t[13]=e("h2",null,"Game not found",-1)),f(y,{to:"/",class:"btn-primary"},{default:M(()=>[...t[12]||(t[12]=[$("Go Home",-1)])]),_:1})])),(c(),A(te,{to:"body"},[f(Fe,{name:"toast",appear:""},{default:M(()=>[s(re)?(c(),g("div",Pt,[f(a,{name:"fa6-solid:check-circle"}),e("span",null,r(s(ce)),1)])):F("",!0)]),_:1})]))])}}}),At=Z(zt,[["__scopeId","data-v-a2377f23"]]);export{At as default};
