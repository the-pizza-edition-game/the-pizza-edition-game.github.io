import{_ as oe,q as g,C as V,j as W,c as v,o as r,a as e,n as R,b as c,m as ae,t as m,d as _,v as G,y as Ce,T as ne,E as Fe,G as Te,f as Se,i as Y,l as $e,H as Ee,I as Le,u as U,s as Q,J as X,K as Re,k as n,x as Z,w as T,L as xe,F as ee,r as te,e as Pe,M as Ge}from"./DipR4v5c.js";import{_ as ze}from"./CEy7tNm-.js";import{u as Be}from"./DiwWR35A.js";const Me={class:"bookmark-reminder"},qe={class:"bookmark-content"},Ie={class:"bookmark-left"},Ne={class:"bookmark-text"},He={class:"bookmark-right"},Ae={class:"bookmark-shortcut"},Oe={class:"shortcut-key"},Ve={class:"modal-content"},De={class:"modal-header"},Ue={class:"modal-icon"},We={class:"modal-body"},je={class:"key"},Je={class:"modal-tip"},Ke={__name:"BookmarkReminder",props:{title:{type:String,default:"Bookmark This Page"},description:{type:String,default:"Save this page to easily find it again later!"},buttonText:{type:String,default:"Bookmark Now"},modalTitle:{type:String,default:"Bookmark This Page"},modalTip:{type:String,default:"ðŸ’¡ This way you can easily find this page again!"},bookmarkUrl:{type:String,default:null},bookmarkTitle:{type:String,default:null}},setup(S){const y=S,F=g(!1),H=g(!1);V(()=>{H.value=navigator.userAgent.toLowerCase().indexOf("mac")!==-1});const h=W(()=>H.value?"âŒ˜":"Ctrl"),A=W(()=>H.value?"Cmd":"Ctrl"),z=()=>{F.value=!1};function B($,o){try{return window.sidebar&&window.sidebar.addPanel?(window.sidebar.addPanel(o,$,""),!0):window.external&&window.external.AddFavorite?(window.external.AddFavorite($,o),!0):!1}catch{return!1}}const j=()=>{const $=y.bookmarkUrl??window.location.href,o=y.bookmarkTitle??document.title;B($,o)||(F.value=!0)};return($,o)=>{const E=ae;return r(),v("div",null,[e("div",Me,[e("div",qe,[e("div",Ie,[c(E,{name:"fa6-solid:bookmark",class:"bookmark-icon"}),e("div",Ne,[e("h3",null,m(S.title),1),e("p",null,m(S.description),1)])]),e("div",He,[e("div",Ae,[e("kbd",Oe,m(h.value),1),o[0]||(o[0]=e("span",{class:"shortcut-plus"},"+",-1)),o[1]||(o[1]=e("kbd",{class:"shortcut-key"},"D",-1))]),e("button",{class:"bookmark-btn",onClick:j},[c(E,{name:"fa6-solid:star"}),_(" "+m(S.buttonText),1)])])])]),(r(),R(ne,{to:"body"},[F.value?(r(),v("div",{key:0,class:"modal-overlay",onClick:Ce(z,["self"])},[e("div",Ve,[e("div",De,[e("div",Ue,[c(E,{name:"fa6-solid:bookmark"})]),e("h3",null,m(S.modalTitle),1),e("button",{class:"modal-close",onClick:z,"aria-label":"Close"},[c(E,{name:"fa6-solid:times"})])]),e("div",We,[e("p",null,[o[2]||(o[2]=_(" Press ",-1)),e("kbd",je,m(A.value),1),o[3]||(o[3]=_(" + ",-1)),o[4]||(o[4]=e("kbd",{class:"key"},"D",-1)),o[5]||(o[5]=_(" to bookmark this page ",-1))]),e("p",Je,m(S.modalTip),1)]),e("div",{class:"modal-footer"},[e("button",{class:"modal-btn primary",onClick:z}," Got it! ")])])])):G("",!0)]))])}}},Ye=Object.assign(oe(Ke,[["__scopeId","data-v-073df4f4"]]),{__name:"BookmarkReminder"}),Qe={class:"game-page"},Xe={key:0,class:"game-layout"},Ze={class:"main-column"},et={class:"game-container-wrapper"},tt={key:0,class:"ruffle-container",style:{display:"flex","align-items":"center","justify-content":"center",color:"white"}},ot=["src"],at={class:"game-bar"},nt={class:"game-bar-left"},st={class:"game-title"},lt={class:"game-rating"},it={class:"stars"},rt={class:"rating-score"},ct={class:"rating-count"},ut={class:"game-bar-right"},dt=["title","disabled"],mt={key:0,class:"share-popover"},ft={class:"game-content-grid"},pt={class:"game-description-card"},gt={class:"desc-header"},vt={class:"desc-content"},yt={key:0,class:"game-description"},ht={key:1,class:"game-description"},kt={class:"tech-info"},wt={class:"tech-item"},bt={class:"tech-value"},_t={class:"game-tags"},Ct={class:"sidebar-column"},Ft={class:"sidebar-content"},Tt={class:"games-grid"},St={key:1,class:"not-found"},$t={key:0,class:"toast-notification"},Et=Fe({__name:"[slug]",async setup(S){let y,F;const h=Te().params.slug,A=Se(),z=A.public.siteUrl||"https://pizagame.com",B=A.public.siteTarget||"production",$=B==="github"?"github io":B==="bitbucket"?"bitbucket io":B==="gitlab"?"gitlab io":"",{data:o}=([y,F]=Y(()=>$e(`/api/games/${h}`,{key:`game-${h}`},"$h3TYe2aeyH")),y=await y,F(),y),{data:E}=([y,F]=Y(()=>Ee(`/api/games/similar/${h}`,{key:`similar-${h}`,default:()=>[]},"$m6kVydA0vn")),y=await y,F(),y),x=W(()=>o.value?.format==="flash");he(o),ye(o,h,z,$);const{containerRef:se,pseudoFullscreen:le,toggleFullscreen:J}=ke(),{containerRef:ie,reload:re}=we(o,x),{rating:ce,votes:ue,showShare:D,showToast:C,toastMessage:M,copyLink:K}=be(),{isGameCached:de,getCacheStatus:me,cacheGame:fe,uncacheGame:pe}=Be(),L=g(!1),P=g(!1),q=g("none");V(async()=>{if(o.value&&h){const a=String(h);L.value=await de(a),q.value=await me(a)}});const ge=async()=>{if(!o.value||!h)return;const a=String(h);if(L.value)try{P.value=!0,await pe(a),L.value=!1,q.value="none",M.value="Game removed from offline cache",C.value=!0,setTimeout(()=>{C.value=!1},3e3)}catch(t){console.error("Failed to remove cache:",t),M.value="Failed to remove cache",C.value=!0,setTimeout(()=>{C.value=!1},3e3)}finally{P.value=!1}else try{P.value=!0,q.value="caching",await fe(o.value.url,a,o.value.title),L.value=!0,q.value="cached",M.value="Game cached successfully! Available offline.",C.value=!0,setTimeout(()=>{C.value=!1},3e3)}catch(t){console.error("Failed to cache game:",t),q.value="failed",M.value="Failed to cache game. It may not support offline mode.",C.value=!0,setTimeout(()=>{C.value=!1},3e3)}finally{P.value=!1}},ve=()=>{if(x.value)re();else{const a=document.querySelector("iframe");a&&(a.src=a.src)}};function ye(a,t,l,s){Le(()=>{if(!a.value)return;const k=`${a.value.title||"Game"} - Pizza Edition | Play Unblocked Full Screen`,p=s?`${k} ${s}`:k,w=a.value.description,i=`${l}/games/${a.value.slug||t}`,f=a.value.image?`${l}${a.value.image}`:`${l}/media/og-image.webp`,u=a.value.keywords||"",d=s?`${u}, ${s}`:u;U({title:p,meta:[{property:"og:title",content:p},{name:"description",content:w},{property:"og:description",content:w},{property:"og:image",content:f},{property:"og:url",content:i},{property:"og:type",content:"website"},{name:"twitter:title",content:p},{name:"twitter:description",content:w},{name:"twitter:image",content:f},{name:"keywords",content:d}]}),U({link:[{rel:"canonical",href:i}],script:[{type:"application/ld+json",innerHTML:JSON.stringify({"@context":"https://schema.org","@type":"VideoGame",name:a.value.title||"Game",alternateName:`${a.value.title||"Game"} Pizza Edition`,description:w,url:i,image:f,playMode:"SinglePlayer",applicationCategory:"Game",operatingSystem:"Web Browser",gamePlatform:["Web Browser","Desktop","Mobile"],genre:a.value.categories||["Games"],offers:{"@type":"Offer",price:"0",priceCurrency:"USD",availability:"https://schema.org/InStock"},aggregateRating:{"@type":"AggregateRating",ratingValue:"4.6",ratingCount:"1000",bestRating:"5",worstRating:"1"},publisher:{"@type":"Organization",name:"PizaGame",alternateName:["Pizza Edition","The Pizza Edition"],url:l}})},{type:"application/ld+json",innerHTML:JSON.stringify({"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"PizaGame",item:l},{"@type":"ListItem",position:2,name:"Games",item:`${l}/games`},{"@type":"ListItem",position:3,name:a.value.title||"Game",item:i}]})}]})})}function he(a){if(a.value?.url)try{const t=new URL(a.value.url).origin;U({link:[{rel:"preconnect",href:t,crossorigin:"anonymous"},{rel:"dns-prefetch",href:t}]})}catch{}}function ke(){const a=g(null),t=g(!1),l="pseudo-fullscreen-lock",s=typeof navigator<"u"&&/iP(ad|hone|od)/i.test(navigator.userAgent||""),k=typeof Element<"u"&&!!(Element.prototype.requestFullscreen||Element.prototype.webkitRequestFullscreen||Element.prototype.mozRequestFullScreen||Element.prototype.msRequestFullscreen),p=()=>document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement,w=b=>{if(!b)return;const O=b.requestFullscreen||b.webkitRequestFullscreen||b.mozRequestFullScreen||b.msRequestFullscreen;O&&O.call(b)?.catch(_e=>{console.error(`Error attempting to enable fullscreen: ${_e.message}`)})},i=()=>{const b=document.exitFullscreen||document.webkitExitFullscreen||document.mozCancelFullScreen||document.msExitFullscreen;b&&b.call(document)?.catch(O=>{console.error(`Error attempting to exit fullscreen: ${O.message}`)})},f=()=>document.body.classList.add(l),u=()=>document.body.classList.remove(l),d=()=>{p()||(t.value=!1,u())},I=()=>{document.visibilityState==="visible"&&!t.value&&!p()&&u()},N=()=>{!t.value&&!p()&&u()};return Q(t,b=>{typeof document>"u"||(b?f():u())}),V(()=>{typeof document>"u"||(u(),document.addEventListener("fullscreenchange",d),document.addEventListener("webkitfullscreenchange",d),window.addEventListener("pageshow",N),document.addEventListener("visibilitychange",I))}),X(()=>{u(),typeof document<"u"&&(document.removeEventListener("fullscreenchange",d),document.removeEventListener("webkitfullscreenchange",d),window.removeEventListener("pageshow",N),document.removeEventListener("visibilitychange",I))}),{containerRef:a,pseudoFullscreen:t,toggleFullscreen:()=>{if(a.value){if(p()){i();return}if(t.value){t.value=!1,u();return}k&&!s?w(a.value):t.value=!0}}}}function we(a,t){const l=g(null),s=g(!1),k=()=>new Promise((f,u)=>{if(typeof window.RufflePlayer<"u"||typeof window.Ruffle<"u"){f();return}const d=document.createElement("script");d.src="https://unpkg.com/@ruffle-rs/ruffle",d.async=!0,d.onload=()=>{let I=0;const N=()=>{typeof window.RufflePlayer<"u"||typeof window.Ruffle<"u"?f():I<50?(I++,setTimeout(N,100)):u(new Error("Ruffle failed to initialize"))};N()},d.onerror=()=>u(new Error("Failed to load Ruffle script")),document.body.appendChild(d)}),p=()=>typeof window.RufflePlayer<"u"?window.RufflePlayer.newest():typeof window.Ruffle<"u"?window.Ruffle.newest():null,w=async()=>{if(!(!t.value||!l.value||s.value||!a.value||typeof window>"u"))try{await k();const f=p();if(!f)throw new Error("Ruffle failed to initialize");const u=f.createPlayer();u.config={autoplay:"auto",unmuteOverlay:"visible",backgroundColor:"#000000",letterbox:"on",logLevel:"warn",upgradeToHttps:!0,allowScriptAccess:!1,allowNetworking:"all",quality:"high",scale:"showAll",allowFullscreen:!0},l.value.appendChild(u);let d=a.value.url;d.startsWith("http://")&&window.location.protocol==="https:"&&(d=d.replace("http://","https://")),await u.load(d),s.value=!0}catch(f){console.error("Error loading Flash game:",f),l.value&&(l.value.innerHTML=`
          <div style="display: flex; align-items: center; justify-content: center; height: 100%; color: white; flex-direction: column; gap: 1rem;">
            <p>Error loading Flash game</p>
            <p style="font-size: 0.9rem; color: #999;">${f instanceof Error?f.message:"Unknown error"}</p>
          </div>
        `)}},i=()=>{l.value&&(l.value.innerHTML="",s.value=!1,w())};return Q(()=>a.value?.slug,()=>{t.value&&i()}),V(()=>{t.value&&Re(()=>w())}),X(()=>{l.value&&(l.value.innerHTML="",s.value=!1)}),{containerRef:l,isLoaded:s,reload:i}}function be(){const a=g(9.2),t=g("464,392"),l=g(!1),s=g(!1),k=g("");return{rating:a,votes:t,showShare:l,showToast:s,toastMessage:k,copyLink:()=>{navigator.clipboard.writeText(window.location.href),l.value=!1,k.value="Link copied to clipboard!",s.value=!0,setTimeout(()=>{s.value=!1},3e3)}}}return(a,t)=>{const l=xe,s=ae,k=Ye,p=Pe,w=ze;return r(),v("div",Qe,[n(o)?(r(),v("div",Xe,[e("div",Ze,[e("div",et,[e("div",{ref_key:"gamePlayerContainer",ref:se,class:Z(["game-player",{"pseudo-fullscreen":n(le)}])},[c(l,null,{fallback:T(()=>[n(x)?(r(),v("div",tt,[...t[3]||(t[3]=[e("p",null,"Loading Flash player...",-1)])])):G("",!0)]),default:T(()=>[n(x)?(r(),v("div",{key:0,ref_key:"ruffleContainer",ref:ie,class:"ruffle-container"},null,512)):G("",!0)]),_:1}),n(x)?G("",!0):(r(),v("iframe",{key:0,src:n(o).url,title:"game",loading:"lazy",allowfullscreen:"",scrolling:"no",allow:`
                autoplay;
                fullscreen;
                geolocation;
                microphone;
                camera;
                midi;
              `},null,8,ot))],2),e("div",at,[e("div",nt,[e("h1",st,m(n(o).title),1),e("div",lt,[e("div",it,[c(s,{name:"fa6-solid:star"}),c(s,{name:"fa6-solid:star"}),c(s,{name:"fa6-solid:star"}),c(s,{name:"fa6-solid:star"}),c(s,{name:"fa6-solid:star-half-alt"})]),e("span",rt,m(n(ce)),1),e("span",ct,"("+m(n(ue))+" votes)",1)])]),e("div",ut,[e("button",{onClick:ve,class:"tool-btn",title:"Reload"},[c(s,{name:"fa6-solid:rotate-right"})]),c(l,null,{default:T(()=>[e("button",{class:Z(["tool-btn",{highlight:n(L)}]),title:n(L)?"Remove offline cache":"Cache for offline play",disabled:n(P),onClick:ge},[n(P)?(r(),R(s,{key:0,name:"fa6-solid:spinner",class:"spin-icon"})):n(L)?(r(),R(s,{key:1,name:"fa6-solid:download"})):(r(),R(s,{key:2,name:"fa6-regular:circle-down"}))],10,dt)]),_:1}),e("button",{class:"tool-btn",title:"Share",onClick:t[1]||(t[1]=i=>D.value=!n(D))},[c(s,{name:"fa6-solid:share-nodes"}),n(D)?(r(),v("div",mt,[e("button",{onClick:t[0]||(t[0]=(...i)=>n(K)&&n(K)(...i))},"Copy Link")])):G("",!0)]),e("button",{class:"tool-btn highlight",title:"Fullscreen",onClick:t[2]||(t[2]=(...i)=>n(J)&&n(J)(...i))},[c(s,{name:"fa6-solid:expand"})])])])]),c(k,{class:"bookmark-reminder-container",title:`Bookmark ${n(o)?.title}`,description:`Save ${n(o)?.title} to easily play it again later!`,"modal-title":"Bookmark This Game","modal-tip":`ðŸ’¡ This way you can easily find ${n(o)?.title} again!`},null,8,["title","description","modal-tip"]),e("div",ft,[e("div",pt,[e("div",gt,[e("h2",null,"About "+m(n(o).title),1)]),e("div",vt,[n(o).content?(r(),v("div",yt,[e("p",null,m(n(o).content),1)])):(r(),v("div",ht,[e("p",null,[t[4]||(t[4]=_(" Play ",-1)),e("strong",null,m(n(o).title),1),_(" online for free on Pizza Edition. It is a popular "+m(n(o).categories?.[0])+" game that you can play on your browser. ",1)])])),t[9]||(t[9]=e("h3",null,"Features",-1)),t[10]||(t[10]=e("ul",{class:"features-list"},[e("li",null,"Smooth and responsive gameplay"),e("li",null,"Play directly in your browser"),e("li",null,"No installation required"),e("li",null,"Mobile and desktop compatible")],-1)),e("div",kt,[t[7]||(t[7]=e("div",{class:"tech-item"},[e("span",{class:"tech-label"},"Developer"),e("span",{class:"tech-value"},"Pizza Edition")],-1)),e("div",wt,[t[6]||(t[6]=e("span",{class:"tech-label"},"Platform",-1)),e("span",bt,[c(l,null,{fallback:T(()=>[...t[5]||(t[5]=[_(" Web Browser (HTML5) ",-1)])]),default:T(()=>[_(m(n(x)?"Web Browser (Flash via Ruffle)":"Web Browser (HTML5)")+" ",1)]),_:1})])]),t[8]||(t[8]=e("div",{class:"tech-item"},[e("span",{class:"tech-label"},"Last Updated"),e("span",{class:"tech-value"},"October 2024")],-1))])]),e("div",_t,[(r(!0),v(ee,null,te(n(o).categories,i=>(r(),R(p,{key:i,to:`/category/${i}`,class:"tag-chip"},{default:T(()=>[_(m(i),1)]),_:2},1032,["to"]))),128))])])])]),e("aside",Ct,[e("div",Ft,[t[11]||(t[11]=e("h3",{class:"sidebar-header"},"Recommended Games",-1)),e("div",Tt,[(r(!0),v(ee,null,te(n(E),i=>(r(),R(w,{key:i.slug,game:i,"aspect-ratio":"1"},null,8,["game"]))),128))])])])])):(r(),v("div",St,[t[13]||(t[13]=e("h2",null,"Game not found",-1)),c(p,{to:"/",class:"btn-primary"},{default:T(()=>[...t[12]||(t[12]=[_("Go Home",-1)])]),_:1})])),(r(),R(ne,{to:"body"},[c(Ge,{name:"toast",appear:""},{default:T(()=>[n(C)?(r(),v("div",$t,[c(s,{name:"fa6-solid:check-circle"}),e("span",null,m(n(M)),1)])):G("",!0)]),_:1})]))])}}}),Gt=oe(Et,[["__scopeId","data-v-1e2468cd"]]);export{Gt as default};
